<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<graphml xmlns="http://graphml.graphdrawing.org/xmlns" xmlns:java="http://www.yworks.com/xml/yfiles-common/1.0/java" xmlns:sys="http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0" xmlns:x="http://www.yworks.com/xml/yfiles-common/markup/2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="http://www.yworks.com/xml/graphml" xmlns:yed="http://www.yworks.com/xml/yed/3" xsi:schemaLocation="http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd">
  <!--Created by yEd 3.22-->
  <key attr.name="Description" attr.type="string" for="graph" id="d0"/>
  <key for="port" id="d1" yfiles.type="portgraphics"/>
  <key for="port" id="d2" yfiles.type="portgeometry"/>
  <key for="port" id="d3" yfiles.type="portuserdata"/>
  <key attr.name="url" attr.type="string" for="node" id="d4"/>
  <key attr.name="description" attr.type="string" for="node" id="d5"/>
  <key for="node" id="d6" yfiles.type="nodegraphics"/>
  <key for="graphml" id="d7" yfiles.type="resources"/>
  <key attr.name="url" attr.type="string" for="edge" id="d8"/>
  <key attr.name="description" attr.type="string" for="edge" id="d9"/>
  <key for="edge" id="d10" yfiles.type="edgegraphics"/>
  <graph edgedefault="directed" id="G">
    <data key="d0" xml:space="preserve"/>
    <node id="n0">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="991.5547999999999" width="560.4658440000002" x="190.0" y="169.5"/>
          <y:Fill color="#FFCC00" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="944.875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="459.970703125" x="50.24757043750009" xml:space="preserve" y="23.339899999999943">#include "gpio.h"
#include "iic.h"
#include "led.h"
#include "sys.h"
#include "timer.h"
#include "adc.h"
#include "usart.h" 
#include "TaskFun.h"
#include "Flash.h"	
#include "delay.h"
#include "wdt.h"
#include "bq769xx.h"
#include "ConfigPara.h"
#include "Rs485Data.h"
#include "DataBase.h"
#include "soc.h"

TaskTime     TaskTimePare=TaskTime_DEFAULTS;

void SW_JTAGioConfig(void);
void FLASH_Update_Data(void);
void Sys_Rece_Data(void);
void Sys_Send_Data(void);
void Get_Base_Data(void);
void Mix_Function_Pro(void);

int main(void)
{	 
	  NVIC_Configuration(); 	 //ÉèÖÃNVICÖÐ¶Ï·Ö×é2:2Î»ÇÀÕ¼ÓÅÏÈ¼¶£¬2Î»ÏìÓ¦ÓÅÏÈ¼¶
	  SW_JTAGioConfig();
	  Init_GPIO_SYS_Power(); 
		InitPara0();
		//FLASH_Update_Data();
	  //System_Pare_Get();
		Init_GPIO_LED();
		Init_GPIO_ALERT();
	  Init_GPIO_BQ769xx_Wake();
		Init_GPIO_R485EN();
		Init_GPIO_IIC(); 

		Uart2_init(115200);
	  Tim1_Init(7199,9);         //72000000/71999=1k    1msÖÐ¶ÏÒ»´Î	
		delay_init();
	  BQ769xx_Wake();
		BQ769xx_Init();
		batt_cap_ocvsoc_init();
		gBMSData.Sys_Mod.sys_mode=SYS_MODE_STANDBY;
		//Init_Watchdog(3,1250);   //(prer,rlr)  Tout=((4*2^prer)*rlr)/40 (ms). = 1000ms
   	while(1) 
	  {   
				/*Get time flag**************/
			  Systim_Time_Run();        
        /*Receive external data******/
        Sys_Rece_Data();              
			  /*Data sent out**************/
			  Sys_Send_Data();
        /* Basic data acquisition****/  
        Get_Base_Data();
        /* Mied function processing**/
        Mix_Function_Pro();
        /*Clear time flag************/
        Clear_flag();
		}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n1">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.237439999999992" width="128.3039999999999" x="238.97907790942457" y="621.5543714116218"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="62.15199999999993" y="6.118719999999939">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n2">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="104.0" width="422.9999999999998" x="-475.05597084057507" y="577.6730914116217"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="384.806640625" x="19.096679687499886" xml:space="preserve" y="13.2470703125">void SW_JTAGioConfig(void)
{		
		RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO, ENABLE);
		GPIO_PinRemapConfig(GPIO_Remap_SWJ_JTAGDisable , ENABLE);
}  <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n3">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="104.0" width="668.3124999999995" x="-720.3684708405749" y="454.34618282324357"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="92.20703125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="613.345703125" x="27.483398437499773" xml:space="preserve" y="5.896484375">void NVIC_Configuration(void)
{

    NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);	//ÉèÖÃNVICÖÐ¶Ï·Ö×é2:2Î»ÇÀÕ¼ÓÅÏÈ¼¶£¬2Î»ÏìÓ¦ÓÅÏÈ¼¶

}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n4">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.237439999999992" width="128.3039999999999" x="238.97907790942452" y="605.3169314116218"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="62.15199999999993" y="6.118720000000053">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n5">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.237439999999992" width="161.07199999999992" x="239.18769309884914" y="637.4837290632438"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="78.53599999999994" y="6.118719999999939">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n6">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="193.9999999999999" width="422.9999999999998" x="-720.3684708405749" y="700.9999999999999"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="368.798828125" x="27.100585937499886" xml:space="preserve" y="14.143554687499886">void Init_GPIO_SYS_Power(void)
{
	 GPIO_InitTypeDef  GPIO_InitStructure;
	 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);	
	 	
	 GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;	
	 GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; 		
	 GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
	 GPIO_Init(GPIOB, &amp;GPIO_InitStructure);	
	 GPIO_SetBits(GPIOB,GPIO_Pin_5);	
}	<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n7">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="52.75" width="148.3124999999999" x="-720.3684708405749" y="643.1301828232434"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="26" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="35.8525390625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.6962890625" x="15.80810546875" xml:space="preserve" y="8.44873046875">PowerON<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n8">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="463.5312499999998" width="510.8906249999998" x="-1289.8345979311496" y="700.9999999999998"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="415.6328125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="447.185546875" x="31.852539062499773" xml:space="preserve" y="23.949218749999773">void InitPara0(void)
{
	 gBMSConfig.DataLeng=sizeof(gBMSConfig);
   
   gBMSConfig.Type.CapaRate=200;      //¶î¶¨ÈÝÁ¿2.00AH
   gBMSConfig.Type.VoltSpec=18;       //µçÑ¹¹æ¸ñ
   gBMSConfig.Type.CellNum_Ser=5;     //´®Áª½ÚÊý
	 gBMSConfig.Type.CellNum_Par=1;     //²¢Áª½ÚÊý
   gBMSConfig.Type.TempNum=1;         //ÎÂ¶Èµã¸öÊý
   gBMSConfig.Type.ShuntSpec=5000;    //·ÖÁ÷Æ÷¹æ¸ñ5M¦¸
   gBMSConfig.Type.OCVDaleyTime=600;    
	
	 gBMSConfig.Balan.balanc_start_volt = 3000;
	 gBMSConfig.Balan.balanc_diffe_volt = 100;
	 gBMSConfig.Balan.balanc_number_max = 3;   
	 gBMSConfig.Balan.balanc_oneall_time = 900;	

   gBMSConfig.BQ76Para.SCD_Delay=0x03;
   gBMSConfig.BQ76Para.SCD_Thresh=0x07;
   gBMSConfig.BQ76Para.OCD_Delay=0x07;
   gBMSConfig.BQ76Para.OCD_Thresh=0x0F;
   gBMSConfig.BQ76Para.UV_Delay=0x03;
   gBMSConfig.BQ76Para.OV_Delay=0x03;
   gBMSConfig.BQ76Para.UV_Thresh=2500;
   gBMSConfig.BQ76Para.OV_Thresh=4200;
  
   gBMSConfig.DataCRC=0-DataCRC(gBMSConfig.DataLeng,(u8 *)&amp;gBMSConfig);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n9">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.462566400000014" width="161.07199999999992" x="239.18769309884908" y="653.7211690632438"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="78.53599999999994" y="4.231283200000007">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n10">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="58.0" width="166.99999999999977" x="-1570.7836083478162" y="700.9999999999998"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="151.392578125" x="7.803710937499773" xml:space="preserve" y="19.6494140625">sBMSConfig   gBMSConfig;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n11">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.37776640000004" width="261.42399999999986" x="-1260.8452237371425" y="758.2058205917351"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="128.712" y="6.688883199999964">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n12">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="190.0" width="270.99999999999955" x="-1942.167216695632" y="700.9999999999998"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="151.01171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="195.419921875" x="37.79003906249977" xml:space="preserve" y="19.494140625"> typedef struct BMSConfig{
   
   u8 DataLeng;
   sSystem_Type        Type;      
   sSystem_Balan       Balan ; 
   sSystem_BQ76Para    BQ76Para;
   u8  DataCRC;
  }sBMSConfig;

extern  sBMSConfig   gBMSConfig;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n13">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="178.79999999999995" width="384.5999999999997" x="-2326.7672166956318" y="374.4999999999999"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="SimHei" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="124.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="358.0" x="13.299999999999727" xml:space="preserve" y="27.399999999999977"> typedef struct System_Type
 {
		u64 CapaRate;      //µç³Ø°ü×ÜÈÝÁ¿  
		u8 VoltSpec;       // µç³Ø°ü×ÜÑ¹¹æ¸ñ
		u8 CellNum_Ser;    //µç³Ø°ü´®Êý
	 	u8 CellNum_Par;    //µç³Ø°ü²¢Êý
		u8 TempNum;        //µç³Ø°üÎÂ¶ÈÊýÁ¿
		u16 ShuntSpec;     //µç³Ø°ü·ÖÁ÷Æ÷¹æ¸ñ
		u16 OCVDaleyTime;   //¾²Ö¹Ö®ºó S/ÃëºóOCVÐ£×¼ 
  }sSystem_Type;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n14">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="149.19999999999993" width="218.19999999999982" x="-2326.7672166956318" y="551.7999999999998"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="SimHei" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="88.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="166.0" x="26.09999999999991" xml:space="preserve" y="30.600000000000023">typedef struct System_Balan
{ 
	u16 balanc_start_volt;
	u16 balanc_diffe_volt;
	u16 balanc_number_max;   
	u16 balanc_oneall_time;	
}sSystem_Balan;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n15">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="190.0" width="384.5999999999997" x="-2326.7672166956318" y="700.9999999999998"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="SimHei" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="124.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="334.0" x="25.299999999999727" xml:space="preserve" y="33.0"> typedef struct System_Alar_BQ76Para{
  u8 SCD_Delay;      //·Åµç¶ÌÂ·ÑÓÊ±Ê±¼ä
  u8 SCD_Thresh;     //·Åµç¶ÌÂ·ãÐÖµ
  u8 OCD_Delay;      //·Åµç¹ýÁ÷ÑÓÊ±
  u8 OCD_Thresh;     //·Åµç¹ýÁ÷ãÐÖµ
  u8 UV_Delay;       //µ¥ÌåÇ·Ñ¹ÑÓÊ±
  u8 OV_Delay;       //µ¥Ìå¹ýÑ¹ÑÓÊ±
  u16 UV_Thresh;     //µ¥ÌåÇ·Ñ¹ãÐÖµ
  u16 OV_Thresh;     //µ¥Ìå¹ýÑ¹ãÐÖµ     
 }sSystem_BQ76Para;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n16">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="208.28917500000023" width="694.4843749999997" x="-1289.8345979311496" y="1219.9531249999995"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="664.486328125" x="14.999023437499773" xml:space="preserve" y="21.28814218750017">void Init_GPIO_LED(void)
{   
	 GPIO_InitTypeDef  GPIO_InitStructure;
	 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_GPIOB|RCC_APB2Periph_GPIOC, ENABLE);	 

   GPIO_InitStructure.GPIO_Pin = GPIO_Pin_14;				 	
	 GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; 		
	 GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;		 
	 GPIO_Init(GPIOB, &amp;GPIO_InitStructure);					 
	 GPIO_SetBits(GPIOB,GPIO_Pin_14);	
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n17">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.39472640000008" width="136.16831999999997" x="239.18769309884908" y="696.1837354632438"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="66.08416" y="6.197363200000041">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n18">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="208.28917500000023" width="446.0468749999998" x="-1289.8345979311498" y="1458.2423"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="368.798828125" x="38.6240234375" xml:space="preserve" y="21.28814218750017">void Init_GPIO_ALERT(void)
{
	 GPIO_InitTypeDef  GPIO_InitStructure;
	 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);	
		
	 //ALERT//
	 GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;	
	 GPIO_InitStructure.GPIO_Mode=GPIO_Mode_IN_FLOATING;
	 GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;	
	 GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n19">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.462566400000014" width="136.16831999999997" x="239.18769309884914" y="712.5784618632439"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="66.08416" y="4.231283200000007">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n20">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.237439999999992" width="198.01791999999992" x="239.18769309884914" y="725.041028263244"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="97.00895999999995" y="6.118719999999939">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n21">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="197.90624999999994" width="446.8281249999998" x="985.4452794845711" y="-19.515568749999744"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="368.798828125" x="39.0146484375" xml:space="preserve" y="16.09667968749997">void Init_GPIO_BQ769xx_Wake(void)
{
	 GPIO_InitTypeDef  GPIO_InitStructure;
	 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);	
	 //Wake//
	 GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;	
	 GPIO_InitStructure.GPIO_Mode=GPIO_Mode_Out_PP;
	 GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;	
	 GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
	 GPIO_ResetBits(GPIOB,GPIO_Pin_3);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n22">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.462566400000014" width="198.01791999999992" x="239.18769309884914" y="741.278468263244"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="97.00895999999995" y="4.231283200000007">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n23">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="197.90624999999994" width="446.8281249999998" x="985.4452794845711" y="197.14572739884994"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="368.798828125" x="39.0146484375" xml:space="preserve" y="16.096679687499943">void Init_GPIO_R485EN(void)
{
	 GPIO_InitTypeDef  GPIO_InitStructure;
	 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);	
	 //R485EN//
	 GPIO_InitStructure.GPIO_Pin = GPIO_Pin_15;	
	 GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_PP; 		
	 GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
	 GPIO_Init(GPIOB, &amp;GPIO_InitStructure);	
   GPIO_ResetBits(GPIOB,GPIO_Pin_15); 	
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n24">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.39472640000008" width="166.81791999999993" x="239.18769309884914" y="753.741034663244"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="81.40895999999998" y="6.197363200000041">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n25">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="296.34374999999994" width="446.8281249999998" x="985.4452794845712" y="413.8070235476996"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="253.919921875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="365.46484375" x="40.681640624999886" xml:space="preserve" y="21.2119140625">void Init_GPIO_IIC(void ) 
{
		//IIC_DATA   IIC_SCK
	
	GPIO_InitTypeDef GPIO_InitStructure;
	RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOB, ENABLE);
	
	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;
	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_Out_OD;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
	GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
	
	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7;
	GPIO_InitStructure.GPIO_Mode =GPIO_Mode_Out_OD;
	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
	GPIO_Init(GPIOB, &amp;GPIO_InitStructure);
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n26">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.39472640000008" width="119.63199999999992" x="239.1876930988492" y="783.741034663244"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="57.815999999999974" y="6.197363200000041">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n27">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="628.3749999999995" width="692.9218749999993" x="1554.0390294845715" y="-18.088647601149887"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="577.345703125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="631.12890625" x="30.896484374999545" xml:space="preserve" y="25.514648437499773">void Uart2_init(u32 bound)
{
    //GPIO¶Ë¿ÚÉèÖÃ
		USART_InitTypeDef USART_InitStructure;
		NVIC_InitTypeDef NVIC_InitStructure;
		GPIO_InitTypeDef  GPIO_InitStructure;
	  
	  USART_DeInit(USART2);  //¸´Î»´®¿Ú1
		RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA , ENABLE);
		RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2 , ENABLE);  //Ê¹ÄÜUSART1£¬GPIOAÊ±ÖÓ
	  
		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;				 
		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF_PP; 		
		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;		 
		GPIO_Init(GPIOA, &amp;GPIO_InitStructure);

		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;				 
		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_IN_FLOATING; 		 
		GPIO_Init(GPIOA, &amp;GPIO_InitStructure);
	
    //USART ³õÊ¼»¯ÉèÖÃ
		USART_InitStructure.USART_BaudRate = bound;//Ò»°ãÉèÖÃÎª9600;
		USART_InitStructure.USART_WordLength = USART_WordLength_8b;//×Ö³¤Îª8Î»Êý¾Ý¸ñÊ½
		USART_InitStructure.USART_StopBits = USART_StopBits_1;//Ò»¸öÍ£Ö¹Î»
		USART_InitStructure.USART_Parity = USART_Parity_No;//ÎÞÆæÅ¼Ð£ÑéÎ»
		USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;//ÎÞÓ²¼þÊý¾ÝÁ÷¿ØÖÆ
		USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;	//ÊÕ·¢Ä£Ê½
		USART_Init(USART2, &amp;USART_InitStructure); //³õÊ¼»¯´®¿Ú
    
   //Usart1 NVIC ÅäÖÃ
		NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;
		NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=3 ;//ÇÀÕ¼ÓÅÏÈ¼¶3
		NVIC_InitStructure.NVIC_IRQChannelSubPriority = 3;		//×ÓÓÅÏÈ¼¶3
		NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;			//IRQÍ¨µÀÊ¹ÄÜ
		NVIC_Init(&amp;NVIC_InitStructure);	//¸ù¾ÝÖ¸¶¨µÄ²ÎÊý³õÊ¼»¯VIC¼Ä´æÆ÷
		 
    USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);//¿ªÆôÖÐ¶Ï
    USART_Cmd(USART2, ENABLE);                    //Ê¹ÄÜ´®¿Ú 
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n28">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="453.37499999999966" width="609.1718749999993" x="2333.589777719143" y="-18.088647601149887"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="371.529296875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="551.283203125" x="28.944335937499545" xml:space="preserve" y="40.92285156249983">void  Tim1_Init(u16 arr,u16 psc)
{ 
	TIM_TimeBaseInitTypeDef TIM_TimeBaseStructure;
	NVIC_InitTypeDef NVIC_InitStructure;
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_TIM1, ENABLE);	
 
  TIM_TimeBaseStructure.TIM_Period = arr;                    //    ´Ó×°±È½Ï×î´ó   18k  =   72000/ 6000= 12k 
  TIM_TimeBaseStructure.TIM_Prescaler = psc;
  TIM_TimeBaseStructure.TIM_CounterMode = TIM_CounterMode_Up;       //  Ä£Ê½  Ôö
  TIM_TimeBaseStructure.TIM_ClockDivision = 0;                 //  ·ÖÆµ
  TIM_TimeBaseStructure.TIM_RepetitionCounter = 0;      
  TIM_TimeBaseInit(TIM1, &amp;TIM_TimeBaseStructure);

	TIM_ClearFlag(TIM1, TIM_FLAG_Update);  
	TIM_ClearITPendingBit(TIM1, TIM_IT_Update);  //ÇåÖÐ¶Ï±êÖ¾Î»
  TIM_ITConfig(TIM1,TIM_IT_Update ,ENABLE); //´ò¿ªÖÐ¶Ï 
  TIM_Cmd(TIM1, ENABLE);//¼ÆÊý¿ªÊ¼               
	
	//ÅäÖÃTIM1µÄ¸üÐÂÖÐ¶ÏÊ¹ÄÜ
	NVIC_InitStructure.NVIC_IRQChannel = TIM1_UP_IRQn;
  NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 1;//Ö¸¶¨ÇÀÕ¼ÓÅÏÈ¼¶1
  NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;//Ö¸¶¨ÏìÓ¦ÓÅÏÈ¼¶0
  NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
  NVIC_Init(&amp;NVIC_InitStructure);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n29">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.237439999999992" width="425.5519999999997" x="239.1876930988492" y="800.1357610632442"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="210.77599999999984" y="6.118719999999939">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n30">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.39472640000008" width="119.63199999999992" x="239.1876930988492" y="827.2615893264881"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="57.815999999999974" y="6.197363200000041">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n31">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="135.34374999999994" width="263.8281249999998" x="1076.945279484571" y="828.2544810632442"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="106.908203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="151.919921875" x="55.9541015625" xml:space="preserve" y="14.2177734375">void  BQ769xx_Wake(void)
{
		//--------¼¤»î-------------------//
		BQ769xx_WAKE_ON;	
		delay_ms(1000);
		BQ769xx_WAKE_OFF;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n32">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="135.34374999999994" width="291.98812499999985" x="1440.8905589691421" y="828.2544810632442"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="253.1171875" x="19.435468749999927" xml:space="preserve" y="50.970703125">#define  BQ769xx_WAKE_ON      PBout(3)=1
#define  BQ769xx_WAKE_OFF     PBout(3)=0 <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n33">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="417.375" width="263.828125" x="1768.9873679382843" y="828.2544810632439"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="312.724609375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="221.716796875" x="21.0556640625" xml:space="preserve" y="52.3251953125">void BQ769xx_Init(void)
{     
      u8  rcd=0;
      //--------ÉèÖÃµç³Ø ÎÂ¶È·Ö²¼------//
      BQ769xx_Set_CellMap();
     //---------²ÎÊý³õÊ¼»¯-------------//
      BQ769xx_Init_Para();
     //---------¶ÁÈ¡µçÑ¹ÔöÒæºÍÆ«ÖÃ-----//
      BQ769xx_Read_Gain();
     //----------²ÎÊýÅäÖÃ--------------//
      rcd=BQ769xx_Write_Config();
	    
      if(rcd==gRET_OK)
      {
          BQ769xx_Init_State=1;
      }
      else
      {
          BQ769xx_Init_State=0;
      }
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n34">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.71700480000004" width="119.63199999999992" x="239.1876930988492" y="843.6563157264882"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="57.815999999999974" y="5.35850240000002">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n35">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.671526400000175" width="161.24735999999993" x="1806.9381351874229" y="940.5202936699113"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="78.62367999999992" y="7.835763200000088">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n36">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.671526400000175" width="161.24735999999993" x="1806.9381351874229" y="966.9445873398226"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="78.62367999999992" y="7.835763200000088">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n37">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.671526400000175" width="161.24735999999993" x="1806.9381351874229" y="997.2704546632438"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="78.62367999999992" y="7.835763200000088">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n38">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.671526400000175" width="169.42625280000001" x="1809.2789407496916" y="1031.0811746796453"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="82.71312639999996" y="7.835763200000201">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n39">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="329.05500000000006" width="263.828125" x="2381.964735876568" y="785.8285568699114"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="283.322265625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="242.44140625" x="10.693359375" xml:space="preserve" y="22.866367187499918">void  BQ769xx_Set_CellMap(void)
{

   switch(gBMSConfig.Type.CellNum_Ser)
   {
     case 5:  //5´®
        gBMSData.BattPar.Cells_Map=0x001F;
        break;
     case 4:  //4´®
        gBMSData.BattPar.Cells_Map=0x0017;
        break;
		 case 3:  //3´®
        gBMSData.BattPar.Cells_Map=0x0013;
        break;
      default: //5´®
        gBMSData.BattPar.Cells_Map=0x001F;
        break;
   }     
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n40">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="304.05500000000006" width="579.453125" x="2381.964735876568" y="1144.8835568699114"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="268.62109375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="516.54296875" x="31.455078125" xml:space="preserve" y="17.716953125000146">void BQ769xx_Init_Para(void)
{
      Bq769xxReg.SysCtrl1.SysCtrl1Bit.ADC_EN=ADC_ENS;    //
      Bq769xxReg.SysCtrl1.SysCtrl1Bit.TEMP_SEL=EXTE_TEMP_ON;  //
      Bq769xxReg.SysCtrl2.SysCtrl2Bit.DELAY_DIS=ALARM_DELAY_ON; //
      //Bq769xxReg.SysCtrl2.SysCtrl2Bit.CC_EN=CC_CONTINU_DIS;     
			Bq769xxReg.SysCtrl2.SysCtrl2Bit.CC_EN=CC_CONTINU_EN;     
      Bq769xxReg.SysCtrl2.SysCtrl2Bit.CHG_ON=CHG_OFF;    //
      Bq769xxReg.SysCtrl2.SysCtrl2Bit.DSG_ON=DSG_OFF;    //
	
      Bq769xxReg.Protect1.Protect1Bit.RSNS=OCD_SCD_HIGH_RANGE;  //
      Bq769xxReg.Protect1.Protect1Bit.SCD_DELAY = gBMSConfig.BQ76Para.SCD_Delay;   //
      Bq769xxReg.Protect2.Protect2Bit.OCD_DELAY = gBMSConfig.BQ76Para.OCD_Delay;   //
      Bq769xxReg.Protect1.Protect1Bit.SCD_THRESH =gBMSConfig.BQ76Para.SCD_Thresh; //
      Bq769xxReg.Protect2.Protect2Bit.OCD_THRESH = gBMSConfig.BQ76Para.OCD_Thresh; //
      Bq769xxReg.Protect3.Protect3Bit.OV_DELAY = gBMSConfig.BQ76Para.OV_Delay;     //
      Bq769xxReg.Protect3.Protect3Bit.UV_DELAY = gBMSConfig.BQ76Para.UV_Delay;     //  
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n41">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="344.05500000000006" width="1054.453125" x="2381.964735876568" y="1478.9385568699113"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="298.0234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="1010.119140625" x="22.1669921875" xml:space="preserve" y="23.015781250000146">void BQ769xx_Read_Gain(void)
{
      u8  rcd=0;
      rcd= IIC_ReadByte(BQ769xxAddr, ADCGAIN1_RegAddr, &amp;Bq769xxReg.ADCGain1.ADCGain1Byte  );
      rcd= IIC_ReadByte(BQ769xxAddr, ADCGAIN2_RegAddr,  &amp;Bq769xxReg.ADCGain2.ADCGain2Byte );
      rcd= IIC_ReadByte(BQ769xxAddr, ADCOFFSET_RegAddr, &amp;Bq769xxReg.ADCOffset);
			
      VoltCellGainUV = (365 + ((Bq769xxReg.ADCGain1.ADCGain1Byte &amp; 0x0C) &lt;&lt; 1) + ((Bq769xxReg.ADCGain2.ADCGain2Byte &amp; 0xE0)&gt;&gt; 5));
      VoltCellGainMV = (365 + ((Bq769xxReg.ADCGain1.ADCGain1Byte &amp; 0x0C) &lt;&lt; 1) + ((Bq769xxReg.ADCGain2.ADCGain2Byte &amp; 0xE0)&gt;&gt; 5))/1000;
      VoltCellOffSet=Bq769xxReg.ADCOffset;
			
      gBMSConfig.BQ76Para.OV_Thresh=LimitMaxMin(gBMSConfig.BQ76Para.OV_Thresh,OV_THRESH_MAX,OV_THRESH_MIN);
      gBMSConfig.BQ76Para.UV_Thresh=LimitMaxMin(gBMSConfig.BQ76Para.UV_Thresh,UV_THRESH_MAX,UV_THRESH_MIN);
	  			
      Bq769xxReg.OVTrip = (u8)(((((unsigned long)(gBMSConfig.BQ76Para.OV_Thresh - Bq769xxReg.ADCOffset)*1000)/VoltCellGainUV - OV_THRESH_BASE)&gt;&gt;4)&amp;0xff);   //???????4180
      Bq769xxReg.UVTrip = (u8)(((((unsigned long)(gBMSConfig.BQ76Para.UV_Thresh - Bq769xxReg.ADCOffset)*1000)/VoltCellGainUV - UV_THRESH_BASE)&gt;&gt;4)&amp;0xff);   //???????  3200
      Bq769xxReg.CCCfg=0x19;

	    (void) rcd;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n42">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="654.1135937500001" width="868.9062500000005" x="2381.964735876568" y="1852.9935568699116"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="621.44921875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="774.185546875" x="47.3603515625" xml:space="preserve" y="16.332187500000146">u8 BQ769xx_Write_Config(void)
{       
     u8  ret=0;
     u8  rcd=0;
     u8  Count=0;  
     u8  err=0; 
     u8  bqSysCtrProtectionConfig[11]={0};  
     do{   
         rcd=IIC_WritByteMore(BQ769xxAddr, SYS_CTRL1_RegAddr, &amp;(Bq769xxReg.SysCtrl1.SysCtrl1Byte), 8);    //?????????
         rcd =IIC_ReadByteMore(BQ769xxAddr, SYS_CTRL1_RegAddr, bqSysCtrProtectionConfig, 8);
         // rcd=IIC_WritByteMore(BQ769xxAddr, CELLBAL1_RegAddr, &amp;(Bq769xxReg.CellBal1.CellBal1Byte), 11);    //?????????
        //  rcd =IIC_ReadByteMore(BQ769xxAddr, CELLBAL1_RegAddr, bqSysCtrProtectionConfig, 11);
			 
         if(bqSysCtrProtectionConfig[0]!=Bq769xxReg.SysCtrl1.SysCtrl1Byte || bqSysCtrProtectionConfig[1]!=Bq769xxReg.SysCtrl2.SysCtrl2Byte 
             ||bqSysCtrProtectionConfig[2] != Bq769xxReg.Protect1.Protect1Byte||bqSysCtrProtectionConfig[3] != Bq769xxReg.Protect2.Protect2Byte
             || bqSysCtrProtectionConfig[4] != Bq769xxReg.Protect3.Protect3Byte|| bqSysCtrProtectionConfig[5] != Bq769xxReg.OVTrip
             || bqSysCtrProtectionConfig[6] != Bq769xxReg.UVTrip || bqSysCtrProtectionConfig[7] != Bq769xxReg.CCCfg )
          {
              err++;
          }
         Count++;
      }while((err!=0)&amp;&amp;(Count&lt;5)); 
     
     if((err==0)||(Count&lt;5))
     {
          ret=gRET_OK;
     }
     else
     {
          ret=gRET_NG;
          Bq769xxReg.SysCtrl1.SysCtrl1Byte=0;
          Bq769xxReg.SysCtrl2.SysCtrl2Byte=0;
          Bq769xxReg.Protect1.Protect1Byte=0;
          Bq769xxReg.Protect2.Protect2Byte=0;
          Bq769xxReg.Protect3.Protect3Byte=0;
          Bq769xxReg.OVTrip=0;
          Bq769xxReg.UVTrip=0;
          Bq769xxReg.CCCfg=0; 
     }
		 (void) rcd;
     return  ret;  
}		 <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n43">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.717004800000154" width="143.95896319999989" x="239.1876930988492" y="858.3733205264882"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="69.97948159999993" y="5.358502400000134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n44">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="218.54687499999994" width="931.441249999999" x="1101.3742429382853" y="1302.4050635787885"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="151.01171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="879.115234375" x="26.163007812499472" xml:space="preserve" y="33.767578125">void  batt_cap_ocvsoc_init(void)
{
	 gBMSData.BattPar.SOCSys = 1000;
	
	 gBMSData.PackCap.pack_rated_cap=gBMSConfig.Type.CapaRate*gBMSConfig.Type.CellNum_Par*CNT_H_200MS_NUM;  //µç³Ø±ê³ÆÈÝÁ¿ µ¥Î»   10mA/200ms
	
	 gBMSData.PackCap.pack_real_cap=gBMSData.PackCap.pack_rated_cap;    //Êµ¼ÊÈÝÁ¿=¶î¶¨ÈÝÁ¿    µ¥Î»   10mA/200ms 
	 
	 gBMSData.PackCap.pack_rem_cap=gBMSData.PackCap.pack_real_cap*gBMSData.BattPar.SOCSys/1000;     //µç³ØÊµÊ±Ê£ÓàÈÝÁ¿     µ¥Î»   10mA/200ms 
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n45">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.717004800000154" width="326.2309631999998" x="239.1876930988492" y="873.6563157264882"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="161.1154815999999" y="5.358502400000134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n46">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="263.4687499999997" width="234.17562499999917" x="1101.3742429382855" y="1577.727521094333"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="209.81640625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="169.3984375" x="32.38859374999947" xml:space="preserve" y="26.826171874999773">typedef struct BMSData{
   sBattPar      BattPar; 
   sChargePar    ChargePar;
   sStatePar     StatePar;
	 sbalaPar			 BalaPar;
	 sPackCap      PackCap;
   sAlarmPar     AlarmPar;
   sErrorPar     ErrorPar;   
   sSys_Mod      Sys_Mod;
	 sSoftw_Ver    Softw_Ver;
	 sGpio_State   Gpio_State;
  }sBMSData;

extern  sBMSData  gBMSData;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n47">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="263.4687499999997" width="234.17562499999917" x="1426.007055438285" y="1577.727521094333"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="253.919921875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="224.072265625" x="5.0516796874994725" xml:space="preserve" y="4.774414062499773">typedef struct BattPar{
  
  u16 VoltLine;
  i16 CurrLine;
  u16 VoltCell[PACK_CELL_MAX];
  u16 VoltCellDiff;
  u16 VoltCellMax;
  u16 VoltCellMin;
  u16 TempCell[PACK_TEMPEXT_MAX];
  u16 TempPackDiff;
  i16 TempPackMax;
  i16 TempPackMin;
  u16 SOCSys;
  u16 SOCcell[PACK_CELL_MAX];
  u32 CapSoc[PACK_CELL_MAX];
  u16 Cells_Map;
  }sBattPar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n48">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="85.46874999999972" width="234.17562499999917" x="1426.007055438285" y="1841.1962710943328"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="62.8046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="141.408203125" x="46.38371093749947" xml:space="preserve" y="11.332031249999773">typedef struct ChargePar{
  u16 Volt;
  u16 Curr;
}sChargePar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n49">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="85.46874999999972" width="234.17562499999917" x="1426.0070554382849" y="1926.6650210943326"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="136.0703125" x="49.0526562499997" xml:space="preserve" y="3.9814453124997726">typedef struct sStatePar{
  
  u8  RelayDichSW;
  u8  RelayChSW;
}sStatePar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n50">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="143.8687499999998" width="234.17562499999917" x="1426.007055438285" y="2012.1337710943326"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="121.609375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="130.73828125" x="51.71867187499947" xml:space="preserve" y="11.129687499999818">typedef struct sbalaPar{
	u16 bala_dischg;         
	u32 bala_ctrl_sw;          
	u32 bala_ctrl_dr;          
	u8 Bala_force_on;
	u8 bala_state;
	u8 bala_error;	 
}sbalaPar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n51">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="186.3687499999998" width="409.1756249999992" x="1426.007055438285" y="2156.002521094332"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="136.310546875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="356.44140625" x="26.367109374999472" xml:space="preserve" y="25.029101562499818">typedef struct PackCap{
	u32  pack_rated_cap;      //±ê³ÆÈÝÁ¿  ¶î¶¨ÂúÈÝÁ¿
	u32  pack_real_cap;       //Êµ¼ÊÈÝÁ¿  ²»Í¬ÎÂ¶ÈÏÂÊµ¼ÊÈÝÁ¿²»Í¬
	u32  pack_rem_cap; 				//Ê£ÓàÈÝÁ¿  
	u32  pack_chg_max_cap;    
	u32  pack_dsg_max_cap;
	u32  pack_cap_dischg;    //·Åµç°²Ê±ÀÛ¼Æ
  u32  pack_cap_chg;       //³äµç°²Ê±ÀÛ¼Æ
}sPackCap;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n52">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="292.3062499999998" width="234.17562499999917" x="1426.007055438285" y="2342.371271094332"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="268.62109375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="133.38671875" x="50.39445312499947" xml:space="preserve" y="11.842578124999818">typedef struct AlarmPar{
  
   u8 OVP;
   u8 UVP;
   u8 OCP;
   u8 UCP;
   u8 OTP;
   u8 UTP;
   u8 USOC;
   u8 OVLP;
   u8 UVLP;
   
   u8 SCD_BQ;
   u8 OCD_BQ;
   u8 UV_BQ;
   u8 OV_BQ;  
   
  }sAlarmPar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n53">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="139.80625000000026" width="234.17562499999917" x="1426.007055438285" y="2634.6775210943315"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="106.908203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="128.716796875" x="52.72941406249947" xml:space="preserve" y="16.449023437500273">typedef struct ErrorPar{
  
  u8 I2C_Err;
  u8 Uart_Err;
  u8 RelayCh_Err;
  u8 RelayDich_Err;
  }sErrorPar;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n54">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="139.80625000000026" width="234.17562499999917" x="1426.007055438285" y="2774.4837710943316"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="92.20703125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="133.3984375" x="50.38859374999947" xml:space="preserve" y="23.799609375000273">typedef struct Sys_Mod{
  
  u8 sys_mode;
  u8 bms_mode;
  u8 test_mode;
	}sSys_Mod;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n55">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="139.80625000000026" width="234.17562499999917" x="1426.007055438285" y="2914.2900210943317"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="106.908203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="138.0625" x="48.05656249999947" xml:space="preserve" y="16.449023437500273">typedef struct Softw_Ver 
{
	u8 ver_main;
	u8 ver_sub1;
	u8 ver_sub2;
	u8 ver_sub3;
	}sSoftw_Ver;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n56">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="139.80625000000026" width="234.17562499999917" x="1426.007055438285" y="3054.0962710943318"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="92.20703125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="139.416015625" x="47.37980468749947" xml:space="preserve" y="23.799609375000273">typedef struct Gpio_State
{
	u8 IN0_State;
	u8 Charge_Activa_State;
	u8 BQ769xx_Alert_State;
}sGpio_State;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n57">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.665651189732216" width="170.13841066666654" x="237.4975835310317" y="929.6656511897322"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#0000FF" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="83.06920533333329" y="13.332825594866108">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n58">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="850.9454250000002" width="318.6249999999998" x="-871.5891739655749" y="1796.1017874999995"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#0000FF" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="797.86328125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="236.095703125" x="41.264648437499886" xml:space="preserve" y="26.54107187500017">void Systim_Time_Run(void)
{
		if(TaskTimePare.Tim10ms_count&gt;=10)
    {          
				TaskTimePare.Tim10ms_count=0;
				TaskTimePare.Tim10ms_flag = 1;
				if(++TaskTimePare.Tim100ms_count &gt;=10)
				{
						TaskTimePare.Tim100ms_count=0;
						TaskTimePare.Tim100ms_flag=1;
				}
    }
		if(TaskTimePare.Tim100ms_flag==1)
		{
				if(++TaskTimePare.Tim200ms_count &gt;=2)
				{	      
						TaskTimePare.Tim200ms_count=0;
						TaskTimePare.Tim200ms_flag=1;
				}
		}
		
    if(TaskTimePare.Tim100ms_flag==1)
		{		   		 
				if(++TaskTimePare.Tim500ms_count &gt;=5)
				{	      
						TaskTimePare.Tim500ms_count=0;
						TaskTimePare.Tim500ms_flag=1;
				}
		}
		if(TaskTimePare.Tim500ms_flag==1)
		{            
				if(++TaskTimePare.Tim1s_count &gt;=2)
				{	               
					 TaskTimePare.Tim1s_count=0;
					 TaskTimePare.Tim1s_flag=1;
				}
		}
		if(TaskTimePare.Tim1s_flag == 1)
		{      
				if(++TaskTimePare.Tim10s_count &gt;=10)
				{
						TaskTimePare.Tim10s_count = 0;
						TaskTimePare.Tim10s_flag = 1;
				}
		} 
		if(TaskTimePare.Tim10s_flag == 1)
		{                   
				if(++TaskTimePare.Tim1min_count &gt;=6)
				{
						TaskTimePare.Tim1min_count = 0;
						TaskTimePare.Tim1min_flag = 1;
				}
		}	 
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n59">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="208.28917500000023" width="462.0468749999998" x="-1495.6691958622996" y="1796.1017874999995"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#0000FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="151.01171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="427.85546875" x="17.095703125" xml:space="preserve" y="28.63872812500017">void TIM1_UP_IRQHandler(void)// ´¥·¢ADCÖÐ¶Ï²ÉÑùºÍµç»ú»·Â·¿ØÖÆ  0.1MS
{
	  //此程序更新中断一直执行
		if(TIM_GetITStatus(TIM1, TIM_IT_Update)!=RESET)       
    {   
				TIM_ClearFlag(TIM1, TIM_IT_Update); 
				
				TaskTimePare.Tim10ms_count++;	
		}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n60">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.969932800000038" width="170.13841066666654" x="262.0969270620634" y="960.3313023794644"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="83.06920533333329" y="13.484966400000076">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n61">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="83.48917500000027" width="259.6468749999999" x="-456.32960266209966" y="1796.1017874999995"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="62.8046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="146.06640625" x="56.790234374999955" xml:space="preserve" y="10.34224375000008">void Sys_Rece_Data(void)
{
	Uart2Run_Pack();
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n62">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="1271.5704250000003" width="834.2499999999994" x="-456.32960266209966" y="1927.6857103718703"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="1224.197265625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="503.41796875" x="165.41601562499972" xml:space="preserve" y="23.686579687499943">void Uart2Run_Pack(void)
{   
unsigned char ia=0;
    if(RBDown2!=RBUp2)	         //Uart0 Function UartSD0
    {   ia=Uart2Recv[RBDown2++];		
        if(RBDown2&gt;= UARTNunD)
{
        RBDown2=0;
}
        switch(Uart2Stt)
        {
        case 0:	
                if(ia==START_SYMBOL)		 //接收起始字节
                {		Uart2Stt=1;
		Uart2ACC=ia;	//累加数据，用于CRC校验。
		Uart2CntR=0;	//当前接收到的数据个数
		Uart2RecvBuf[Uart2CntR]=ia; //有效数据放入缓冲区
		Uart2CntR=1; //当前接收到的数据个数
		 Uart1ErrCountTime|=0x8000;  //开始计时
                }
                else
                {		Uart2_State|=0x01; //没有接收到起始字节
		Uart2CntR=0;
		Uart2Stt=0;
		Uart2ACC=0;
		  Uart1ErrCountTime&amp;=~0x8000;  //停止计时
                }
                break;	
        case 1:	 //从机地址	
                Uart2Stt++;	  													  
                Uart2ACC+=ia;
                Uart2RecvBuf[Uart2CntR]=ia;									  										
                Uart2CntR++;
                Uart2ErrCountTime&amp;=~0x7fff;  //计时清零   
                break;									
        case 2: //功能指令码
                Uart2Stt++;	  																	  
                Uart2ACC+=ia;
                Uart2RecvBuf[Uart2CntR]=ia;									  										
                Uart2CntR++;
                Uart2ErrCountTime&amp;=~0x7fff;  //计时清零  
                break;																					
        case 3:	
								Uart2Stt++;
                Uart2ACC+=ia;
                Uart2RecvBuf[Uart2CntR]=ia;
                Uart2CntTT=ia+5; //数据个数：起始字节+源地址字节+功能字节+数据长度+校验字节
                Uart2CntR++;
                Uart2ErrCountTime&amp;=~0x7fff;  //¼ÆÊ±ÇåÁã            
                break;																											
        case 4:	
								Uart2ACC+=ia;
                Uart2RecvBuf[Uart2CntR]=ia;	
                Uart2CntR++;
								Uart2ErrCountTime&amp;=~0x7fff;  //¼ÆÊ±ÇåÁã    
                if(Uart2CntR&gt;=Uart2CntTT)	//数据个数校验

                {			
											Uart2Stt=0;
											Uart2ErrCountTime=0;  //¼ÆÊ±Í£Ö¹ 
											if(Uart2ACC==0)	//CRCÐ£Ñé
											{      
													Rs485_Read_Data(Uart2RecvBuf,sizeof(Uart2RecvBuf) );
											 }
											 else
											 {			
														Uart2CntR=0;
														Uart2Stt=0;
														Uart2ACC=0;
														Uart2_State |=0x02;	//CRC   
											 }
                }              
                break;
        default:
                Uart2CntR=0;
                Uart2Stt=0;
                Uart2ACC=0;
                
                Uart2_State |=0x04;//
                break;
       } 	
    }
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n63">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="83.48917500000027" width="259.6468749999999" x="401.1414196758005" y="1927.6857103718703"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="62.8046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="146.078125" x="56.78437500000001" xml:space="preserve" y="10.34224375000008">void Sys_Send_Data(void)
{
	//Rs485_Send_Test();
}			<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n64">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.331302379464432" width="170.13841066666654" x="237.4975835310317" y="991.3012351794645"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="83.06920533333329" y="13.165651189732216">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n65">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.56206080000004" width="174.5948586666665" x="253.22622353103168" y="1021.3252095178577"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="85.29742933333324" y="11.781030399999963">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n66">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="164.28917500000023" width="259.6468749999999" x="401.1414196758005" y="2028.1874978718697"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="106.908203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="144.7421875" x="57.45234375000001" xml:space="preserve" y="28.690485937499943">void Get_Base_Data(void)
{
		BQ769xx_GetData();
	  BQ769xx_GetConfig();
	  Balan_Pack_Check();
		Led_Run_Cpu();
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n67">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.633716628590378" width="179.91965866666655" x="253.22622353103168" y="1048.8872703178577"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="87.95982933333329" y="12.816858314295132">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n68">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="164.28917500000023" width="259.6468749999999" x="786.7515893516007" y="2028.1874978718697"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="106.908203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="156.0625" x="51.792187499999955" xml:space="preserve" y="28.690485937499943">void Mix_Function_Pro(void)
{	  
		BQ769xx_Oper_Comm();
	  BQ769xx_Wake_Comm();
		Sys_Function_Pro();
		Batt_soc_check();
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n69">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="164.28917500000023" width="259.6468749999999" x="190.0" y="1230.840528285737"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="151.01171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="231.35546875" x="14.145703124999955" xml:space="preserve" y="6.638728125000171">void Clear_flag(void)   //Çå³ýÊÂ¼þ±êÖ¾Î»
{
	TaskTimePare.Tim10ms_flag=0;
	TaskTimePare.Tim100ms_flag=0;
	TaskTimePare.Tim200ms_flag=0;
	TaskTimePare.Tim500ms_flag=0;
	TaskTimePare.Tim1s_flag=0;
	TaskTimePare.Tim10s_flag=0;
	TaskTimePare.Tim1min_flag=0;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n70">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.969932800000038" width="179.91965866666655" x="253.22622353103168" y="1079.7745406357153"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="87.95982933333329" y="13.484966400000076">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n71">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="1139.7344875000003" width="961.2031249999993" x="-519.8061651620997" y="3404.2310913827782"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="1003.6796875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="834.015625" x="63.59374999999966" xml:space="preserve" y="68.0274000000004">void BQ769xx_GetData(void) 
{   
		u8  rcd=0;
		u8  ia=0,ib=0;
		u16 cells_map=gBMSData.BattPar.Cells_Map;
		u8  VoltOffset=0;     
		u16 AdcCurr=0;

    if(TaskTimePare.Tim200ms_flag != 1)
    {
					return;
		}

		//---------------------发起I2C读操作，从BQ76920中读回数据-------------------------------//
		rcd= IIC_ReadByteMore(BQ769xxAddr, VC1_HI_RegAddr, BQ769xxGatherData,40);   //.VCell1.VCell1Byte.VC1_HI
		if( rcd==gRET_OK )
		{
			memcpy(&amp;(Bq769xxReg.VCell1.VCell1Byte.VC1_HI), BQ769xxGatherData, 40);
		}
	 //--------------------------??????-----------------------------------//        
		for(ia=0;ia&lt;SYS_CELL_MAX;ia++)
		{   
				if(cells_map&amp;0x01)
				{
						if(Bq769xxReg.ADCOffset&amp;0x80)
						{
								VoltOffset= 0x100-Bq769xxReg.ADCOffset;
								gBMSData.BattPar.VoltCell[ib]=(u16)(((unsigned long)((BQ769xxGatherData[ia*2]*256)+BQ769xxGatherData[ia*2+1])*VoltCellGainUV)/1000-VoltOffset);
						}
						else
						{       
								VoltOffset= Bq769xxReg.ADCOffset; 
								gBMSData.BattPar.VoltCell[ib]=(u16)(((unsigned long)((BQ769xxGatherData[ia*2]*256)+BQ769xxGatherData[ia*2+1])*VoltCellGainUV)/1000+VoltOffset);
						}
						ib++;
				}
				cells_map=cells_map&gt;&gt;1;
		}

		//-----------------------------?????-----------------------------------//
		gBMSData.BattPar.VoltLine=(u16)(((unsigned long)((BQ769xxGatherData[30]*256)+BQ769xxGatherData[31])*BATVOLTLSB)/1000);   //MV
		//-----------------------------????-----------------------------------//
		
		for(ia=0;ia&lt;SYS_TEMPEXT_MAX;ia++)
		{   
				 VoltageTemp[ia]=((unsigned long)((BQ769xxGatherData[ia*2+32]*256)+BQ769xxGatherData[ia*2+32+1])*382)/1000;
				 gBMSData.BattPar.TempCell[ia]=TemChange(VoltageTemp[ia]);
		}
		 
		//-----------------------------?????---------------------------------//     
		AdcCurr=(u16)(BQ769xxGatherData[38]*256)+BQ769xxGatherData[39];

		if(AdcCurr&amp;0x8000)
		{
				AdcCurr=0x10000-AdcCurr;
				gBMSData.BattPar.CurrLine=0x10000-(u16)(((unsigned long) AdcCurr*CRUUVOLTLSB)/gBMSConfig.Type.ShuntSpec) ;   //LBS=8.44uV , ²ÉÑùµç×è£º5mO
		}
		else
		{
				gBMSData.BattPar.CurrLine=(u16)(((unsigned long)AdcCurr*CRUUVOLTLSB)/gBMSConfig.Type.ShuntSpec) ;   //LBS=8.44uV , ²ÉÑùµç×è£º5mO
				
		}

		pack_temp_max_min();
		pack_cell_max_min();
		
		(void) rcd;																																					
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n72">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="263.17198750000034" width="534.3281249999997" x="-1220.06218994334" y="3842.5123413827782"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="195.115234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="485.23046875" x="24.548828124999773" xml:space="preserve" y="34.0283765625004">void BQ769xx_GetConfig(void) 
{
		u8  rcd=0;
		u8  BQ769xxGatherConfig[12]={0};
		if(TaskTimePare.Tim500ms_flag==1 )
    {
				rcd= IIC_ReadByteMore(BQ769xxAddr, SYS_STAT_RegAddr, BQ769xxGatherConfig,12);
				if( rcd==gRET_OK )
				{
					memcpy(&amp;(Bq769xxReg.SysStatus.StatusByte), BQ769xxGatherConfig, 12);
				}
		}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n73">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="1836.1094875000003" width="1090.536458333333" x="-2476.5265480579137" y="3056.0435913827787"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="1768.140625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="975.982421875" x="57.277018229166515" xml:space="preserve" y="33.98443124999994">u8 Balan_Pack_Check(void)
{   
    u8 ret=gRET_OK;
    u8 ia=0;
	  u8 ib=0;
		u16 volta_temp;
		u8 volta_flag;

	  static u8 stup_balan=0;
		static u16 volta_cell_sort[PACK_CELL_MAX] = {0}; 
		static u8 volta_flag_sort[PACK_CELL_MAX] = {0};
		static u16 balanwait_cnt=0;
	  static u16 balantime_cnt=0;
		
		
    if(TaskTimePare.Tim200ms_flag==0)
    {
      return gRET_TM;
    }
     
	  if(gBMSData.BalaPar.Bala_force_on == 1)
		{
				return gRET_NG;
		}
		
    switch(stup_balan)
    {   
			case PCB_SEQ_INIT:
				gBMSData.BalaPar.bala_state = 0;
				gBMSData.BalaPar.bala_ctrl_sw = 0;
				gBMSData.BalaPar.bala_dischg=0;
			
				Bq769xxReg.CellBal1.CellBal1Byte=0;
				Bq769xxReg.CellBal2.CellBal2Byte=0;
				Bq769xxReg.CellBal3.CellBal3Byte=0;
				balance_write_regs(Bq769xxReg.CellBal1.CellBal1Byte, Bq769xxReg.CellBal2.CellBal2Byte, Bq769xxReg.CellBal3.CellBal3Byte ); 
				stup_balan = PCB_SEQ_WAIT;
				break;		
			case PCB_SEQ_WAIT:
				if(++balanwait_cnt &gt; 10)
				{
						balanwait_cnt = 0;
						stup_balan = PCB_SEQ_CHK;
				}
				break;
			case PCB_SEQ_CHK:
				if(gBMSData.Sys_Mod.sys_mode != SYS_MODE_STANDBY)
				{
						stup_balan = PCB_SEQ_INIT;
						break;
				}
				if(((gBMSData.BattPar.VoltCellMax - gBMSData.BattPar.VoltCellMin) &lt; gBMSConfig.Balan.balanc_diffe_volt)||(gBMSData.BattPar.VoltCellMin &lt; gBMSConfig.Balan.balanc_start_volt))
				{
						stup_balan = PCB_SEQ_INIT;
						break;
				}
				stup_balan = PCB_SEQ_SELECT;
				break;
			case PCB_SEQ_SELECT:

			    for(ia=0;ia&lt;gBMSConfig.Type.CellNum_Ser; ia++)  
					{
							volta_cell_sort[ia] = gBMSData.BattPar.VoltCell[ia];
							volta_flag_sort[ia] = ia; 
					}
          for(ia=0;ia&lt;gBMSConfig.Type.CellNum_Ser; ia++)   
				  {
							for(ib=0;ib&lt;(gBMSConfig.Type.CellNum_Ser -1); ib++)   
							{
									if(volta_cell_sort[ib] &lt; volta_cell_sort[ib+1])
									{
											volta_temp = volta_cell_sort[ib+1];
											volta_cell_sort[ib+1] = volta_cell_sort[ib];
											volta_cell_sort[ib] = volta_temp;
										
											volta_flag = volta_flag_sort[ib+1];
											volta_flag_sort[ib+1] = volta_flag_sort[ib];
											volta_flag_sort[ib] = volta_flag;
									}
							}
					}
					for(ia = 0; ia &lt; gBMSConfig.Balan.balanc_number_max; ia++)
					{
							gBMSData.BalaPar.bala_ctrl_sw |= (0x00000001 &lt;&lt; volta_flag_sort[ia]);
					}
					stup_balan = PCB_SEQ_MAP;
          break;
        case PCB_SEQ_MAP:  
					cell_balan_locatget(gBMSData.BalaPar.bala_ctrl_sw, &amp;gBMSData.BalaPar.bala_dischg);
					stup_balan = PCB_SEQ_SET;
          break;
        case PCB_SEQ_SET:
 
					Bq769xxReg.CellBal1.CellBal1Byte=gBMSData.BalaPar.bala_dischg&amp;0x1F;
					Bq769xxReg.CellBal2.CellBal2Byte=(gBMSData.BalaPar.bala_dischg&gt;&gt;5)&amp;0x1F;
					Bq769xxReg.CellBal3.CellBal3Byte=(gBMSData.BalaPar.bala_dischg&gt;&gt;10)&amp;0x1F;
					balance_write_regs( Bq769xxReg.CellBal1.CellBal1Byte, Bq769xxReg.CellBal2.CellBal2Byte, Bq769xxReg.CellBal3.CellBal3Byte ); 
				  gBMSData.BalaPar.bala_state = 1;
					stup_balan=PCB_SEQ_BALA_TIM;
          break;
        case PCB_SEQ_BALA_TIM:
					if(++balantime_cnt&gt;900)  
          {
							stup_balan = PCB_SEQ_INIT;
              balantime_cnt=0;
							gBMSData.BalaPar.bala_state = 0;
							gBMSData.BalaPar.bala_ctrl_sw = 0;
							gBMSData.BalaPar.bala_dischg=0;
						
							Bq769xxReg.CellBal1.CellBal1Byte=0;
							Bq769xxReg.CellBal2.CellBal2Byte=0;
							Bq769xxReg.CellBal3.CellBal3Byte=0;
							balance_write_regs( Bq769xxReg.CellBal1.CellBal1Byte, Bq769xxReg.CellBal2.CellBal2Byte, Bq769xxReg.CellBal3.CellBal3Byte ); 
          }
          break;
        default:
          break;  
     }
     return ret;
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n74">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="183.17198750000034" width="368.07812499999966" x="-3080.5902274662144" y="3944.252496262778"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="121.609375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="202.064453125" x="83.0068359375" xml:space="preserve" y="30.781306250000398">u8 Led_Run_Cpu(void)
{
	if(TaskTimePare.Tim500ms_flag==1)
	{
			LedRun_Set_Not();
	}
	return  gRET_OK;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n75">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="136.17198750000034" width="247.0781250000001" x="-3422.1804549324283" y="3967.752496262778"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="151.421875" x="47.828125" xml:space="preserve" y="29.333064062499943">void LedRun_Set_Not(void)
{
		//u8 gpio_vlue=0;
		PBout(14)=~PBout(14);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n76">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="571.5053208333334" width="479.32812499999966" x="602.9077977842182" y="3404.2310913827782"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="533.2421875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="420.37890625" x="29.474609374999773" xml:space="preserve" y="19.13156666666646">void  BQ769xx_Oper_Comm(void)
{
    if((TaskTimePare.Tim100ms_flag==1)||(Bq769xx_Oper_EN==OPER_ON ) )
    {   
				switch (Bq769xx_Oper_Type)
				{
				case COMM_DSG_ON:
				  BQ769xx_DSGSET(OPER_ON);
					Bq769xx_Oper_EN=OPER_OFF;
					Bq769xx_Oper_Type=0;
					break;
				case COMM_DSG_OFF:
					BQ769xx_DSGSET(OPER_OFF);
					Bq769xx_Oper_EN=OPER_OFF;
					Bq769xx_Oper_Type=0;
					break;
				case COMM_CHG_ON:
					BQ769xx_CHGSET(OPER_ON);
					Bq769xx_Oper_EN=OPER_OFF;
					Bq769xx_Oper_Type=0;
					break;
				case COMM_CHG_OFF:
					BQ769xx_CHGSET(OPER_OFF);
					Bq769xx_Oper_EN=OPER_OFF;
					Bq769xx_Oper_Type=0;
					break;	
				case COMM_CLEAR_ALERT:
					
					break;
				case COMM_ENTER_SHIP:
						Power_Down();
					break;
				default: break;
				}
		}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n77">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="459.00532083333337" width="429.3281249999999" x="1181.940595568436" y="3460.481091382778"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="386.23046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="362.13671875" x="33.595703125" xml:space="preserve" y="36.38742604166691">void  BQ769xx_Wake_Comm(void)
{
	if((TaskTimePare.Tim500ms_flag==1)&amp;&amp;(Bq769xx_Wake_EN==1))
	{
			if(bq769xx_Wake_cont&amp;0x80)
			{
					if((bq769xx_Wake_cont&amp;0x7f)&gt;=WAKE_TIME_OUT_1S)
					{
							BQ769xx_WAKE_OFF;
							bq769xx_Wake_cont=0;
							Bq769xx_Wake_EN=0;
							BQ769xx_Init();
					}
					else  
					{
							bq769xx_Wake_cont++;
					}
			}
			else 
			{		
					BQ769xx_WAKE_ON;
					bq769xx_Wake_cont=0;
					bq769xx_Wake_cont|=0x80;
			}
	}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n78">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="180.88032083333383" width="360.5781249999999" x="1689.443691136872" y="3599.543591382778"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="157.404296875" x="101.5869140625" xml:space="preserve" y="51.68723072916691">void Sys_Function_Pro(void)
{
		Sys_Mode_Charge();
		Sys_State_Check();
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n79">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="459.00532083333337" width="322.3281249999999" x="2159.6535163404233" y="3460.481091382778"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="327.42578125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="205.05859375" x="58.634765625" xml:space="preserve" y="65.78976979166691">u8 Batt_soc_check(void)
{
		u8 ret=gRET_OK;
		static u8 wait_tim_cnt = 5;
	
		if(TaskTimePare.Tim200ms_flag != 1)
		{
				return gRET_NG;
		}
		
		if(wait_tim_cnt &gt; 0)
		{
				wait_tim_cnt--;
				return gRET_NG;
		}
		
		batt_temp_full_cap();
		batt_ocvsoc_calcua_soc();
		batt_AHinte_calcua_soc();
		
		return  ret;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n80">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="883.2240708333334" width="894.5937499999999" x="2566.9063102939745" y="3344.453360018932"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="812.564453125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="700.65625" x="96.96875" xml:space="preserve" y="35.32980885416646">static void batt_temp_full_cap(void)
{
		u8  ratio=0;
		u8  updata_flag=0;
		u16  temp_rate=0;
		static i16 temp_last=0;
	
		if( gBMSData.BattPar.TempPackMin&gt;=250)                             
    {
      ratio=1;
    }
    else if((gBMSData.BattPar.TempPackMin&lt;250)&amp;&amp;(gBMSData.BattPar.TempPackMin&gt;=100))      //
    {   ratio=2;
    }
    else if((gBMSData.BattPar.TempPackMin&lt;100)&amp;&amp;(gBMSData.BattPar.TempPackMin&gt;=0))      
    {   ratio=3;
    }
    else if((gBMSData.BattPar.TempPackMin&lt;-10)&amp;&amp;(gBMSData.BattPar.TempPackMin&gt;=-200))     //
    {   ratio=4;
    }
    else if((gBMSData.BattPar.TempPackMin&lt;-200)&amp;&amp;(gBMSData.BattPar.TempPackMin&gt;=-300))    //
    {   ratio=5;
    }
		else    // 
    {   
				ratio=6;                                         
    }
		
		if( gBMSData.BattPar.TempPackMin&gt;temp_last)
		{
				if((gBMSData.BattPar.TempPackMin-temp_last)&gt;=10 )
				{
						updata_flag=1;
						temp_last=gBMSData.BattPar.TempPackMin;
				}
		}
		else
		{
				if((temp_last-gBMSData.BattPar.TempPackMin)&gt;=10 )
				{
						updata_flag=1;
						temp_last=gBMSData.BattPar.TempPackMin;
				}
		}
		
		if(updata_flag == 1  )
		{
				updata_flag = 0;
				temp_rate=1000+ratio*(gBMSData.BattPar.TempPackMin-250)/10;
				temp_rate=rate_limit_max_min(temp_rate);
			
				gBMSData.PackCap.pack_real_cap=gBMSData.PackCap.pack_rated_cap*temp_rate/1000; /电池衰减后的实际容量  10mA/200ms 
				gBMSData.PackCap.pack_rem_cap=gBMSData.PackCap.pack_real_cap*gBMSData.BattPar.SOCSys/1000;
		}
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n81">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="53.90753280000024" width="170.49885866666668" x="2206.705381078698" y="3759.1116290355985"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="center" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="83.24942933333341" y="24.95376639999995">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n82">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="500.72407083333337" width="711.5937499999999" x="3580.5542242267747" y="3535.703360018932"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="356.828125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="586.626953125" x="62.4833984375" xml:space="preserve" y="71.94797291666646">static void batt_ocvsoc_calcua_soc(void)
{
		static u8 soc_flag = 1;
	
		if(soc_flag == 1)
		{
				soc_flag = 0;
				gBMSData.BattPar.SOCSys = Seeka_OcvSoc_Table(gBMSData.BattPar.VoltCellMin, OCV_Table);
				gBMSData.PackCap.pack_rem_cap =gBMSData.PackCap.pack_real_cap*gBMSData.BattPar.SOCSys/1000;
				return;
		}
		
		if(gBMSData.Sys_Mod.sys_mode != SYS_MODE_STANDBY)
		{
			  stanby_ocv_cnt = 0;
				return ;
		}
		if(stanby_ocv_cnt++ &gt;= STANBY_OCV_TIME)
		{
				stanby_ocv_cnt = 0;
				gBMSData.BattPar.SOCSys = Seeka_OcvSoc_Table(gBMSData.BattPar.VoltCellMin, OCV_Table);
				gBMSData.PackCap.pack_rem_cap =gBMSData.PackCap.pack_real_cap*gBMSData.BattPar.SOCSys/1000;
		}
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n83">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="1201.8959458333334" width="695.9687499999999" x="4411.202138159575" y="3185.1174225189316"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="1121.2890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="589.9609375" x="53.00390625" xml:space="preserve" y="40.30344166666691">static void batt_AHinte_calcua_soc(void)
{

		u16 curr_value = 0;

		if((gBMSData.Sys_Mod.sys_mode == SYS_MODE_CHARGE) &amp;&amp; (soc_uvp_flag == FALSE))
		{
				soc_uvp_flag = TRUE;
		}
		
		if((gBMSData.Sys_Mod.sys_mode != SYS_MODE_CHARGE) &amp;&amp; (soc_ovp_flag == FALSE))
		{
				soc_ovp_flag = TRUE;
		}

		if ((gBMSData.BattPar.VoltCellMax &gt;=(gBMSConfig.BQ76Para.OV_Thresh-2)) &amp;&amp;
			(gBMSData.Sys_Mod.sys_mode == SYS_MODE_CHARGE) &amp;&amp;
			(soc_ovp_flag == TRUE))
		{
			soc_ovp_flag = FALSE;
			gBMSData.PackCap.pack_rem_cap = gBMSData.PackCap.pack_real_cap;
			gBMSData.BattPar.SOCSys = 1000;
			return;
		}

		if((gBMSData.BattPar.VoltCellMin &lt;= (gBMSConfig.BQ76Para.UV_Thresh+2)) &amp;&amp;
			 (gBMSData.Sys_Mod.sys_mode != SYS_MODE_CHARGE) &amp;&amp;
			 (soc_uvp_flag == TRUE))
		{
			soc_uvp_flag = FALSE;
			gBMSData.PackCap.pack_rem_cap = 0;
			gBMSData.BattPar.SOCSys = 0;
			return;
		}
		
		curr_value = abs(gBMSData.BattPar.CurrLine);
		if (gBMSData.Sys_Mod.sys_mode == SYS_MODE_CHARGE)
		{
				if(gBMSData.PackCap.pack_real_cap &gt;= (gBMSData.PackCap.pack_rem_cap + curr_value))
				{
						gBMSData.PackCap.pack_rem_cap += curr_value;
				}
				else 
				{
						gBMSData.PackCap.pack_rem_cap = gBMSData.PackCap.pack_real_cap;
				}
		}
		else  if (gBMSData.Sys_Mod.sys_mode == SYS_MODE_DISCHARGE)
		{
				if(gBMSData.PackCap.pack_rem_cap &gt;= curr_value)
				{
						gBMSData.PackCap.pack_rem_cap -= curr_value;
				}
				else
				{		
						gBMSData.PackCap.pack_rem_cap = 0;
				}
		}
		else 
		{
			//if(gBMSData.PackCap.pack_rem_cap &gt;= 1)    //¾²Ì¬Ê±10MA
			//{
			// 		gBMSData.PackCap.pack_rem_cap -= 1;
			//}
			//else
			//{		
			// 		gBMSData.PackCap.pack_rem_cap = 0;
			//}
		}
		
		gBMSData.BattPar.SOCSys = gBMSData.PackCap.pack_rem_cap*1000/gBMSData.PackCap.pack_real_cap;
		if(gBMSData.BattPar.SOCSys &gt; SOC_LIMIT_MAX)
		{
				gBMSData.BattPar.SOCSys = 1000;
		}
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n84">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="28.350543436559065" width="274.37635891111165" x="-1445.6026524138522" y="1952.6577975271457"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="20" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="269.5859375" x="2.3952107055558827" xml:space="preserve" y="-0.07570484422058144">每10ms中断一次，计数器加1.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n85">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.52862718446977" width="235.5658242070981" x="-800.1287784977341" y="1868.6852386824264"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="226.69140625" x="4.437208978549052" xml:space="preserve" y="-1.0862723452651153">计数超过10则为10ms，清零，置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n86">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.52862718446977" width="235.5658242070981" x="-800.1287784977341" y="1926.6017817660572"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="230.04296875" x="2.7614277285490516" xml:space="preserve" y="-1.0862723452651153">10ms计数10次就是100ms,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n87">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.085645151308881" width="235.5658242070981" x="-813.2966874969736" y="2017.2416181343174"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="230.04296875" x="2.7614277285490516" xml:space="preserve" y="-2.3077633618454456">100ms计数2次就是200ms,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n88">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.085645151308881" width="235.5658242070981" x="-813.2966874969736" y="2148.503163980941"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="230.04296875" x="2.7614277285490516" xml:space="preserve" y="-2.3077633618454456">100ms计数5次就是500ms,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n89">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.085645151308881" width="235.5658242070981" x="-817.7938294658535" y="2266.979647537657"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="206.69921875" x="14.433302728549052" xml:space="preserve" y="-2.3077633618454456">500ms计数2次就是1s,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n90">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.085645151308881" width="235.5658242070981" x="-817.7938294658535" y="2383.7950053720733"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="196.703125" x="19.43134960354905" xml:space="preserve" y="-2.3077633618454456">1s计数10次就是10s,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n91">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.085645151308881" width="235.5658242070981" x="-817.7938294658535" y="2501.596894955951"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="197.359375" x="19.10322460354905" xml:space="preserve" y="-2.3077633618454456">10s计数6次就是1m ,清零置标志位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n92">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="82.13364963536435" width="318.6249999999998" x="-871.5891739655749" y="2690.8320035218726"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="203.751953125" x="57.436523437499886" xml:space="preserve" y="31.716238880182118">static u8 Uart2Recv[UARTNunD]={0};<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n93">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="103.17318487766772" width="364.717098414375" x="-337.57171517031617" y="1981.9651007063635"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="180.3585492071875" y="49.586592438833804">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n94">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="40.79012601397801" width="318.6249999999998" x="-871.5891739655749" y="2772.965653157237"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="164.0546875" x="77.28515624999989" xml:space="preserve" y="11.044477069488948">#define UARTNunD       0xFF <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n95">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="286.65383404571696" width="705.1615297593723" x="-1678.8953642451047" y="2527.101945125498"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="239.21875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="607.1171875" x="49.022171129686285" xml:space="preserve" y="23.71754202285865">void USART2_IRQHandler(void)                	             //串口2中断服务程序
{
if(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)  //接收中断（接收到数据必须是0x0d 0x0a结束）
{
	if(((RBDown2-RBUp2) &amp; UARTNunD)!=1)
	{    Uart2Recv[RBUp2++]=USART_ReceiveData(USART2);
	     if(RBUp2&gt;= UARTNunD)
	     {	RBUp2=0;
	      }
   	}
	else
	 {
	   Uart2Recv[RBUp2]=USART_ReceiveData(USART2);
	 }	
	} 
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n96">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="41.22803440059738" width="260.53250360003983" x="-1234.266338085772" y="2527.101945125498"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="20" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="257.359375" x="1.5865643000199725" xml:space="preserve" y="6.363040637798804">串口接收中断数据存入Buffer<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n97">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.64393032566261" width="365.5636986579882" x="-317.4251801343266" y="2863.26481908473"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="180.7818493289941" y="7.821965162831475">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n98">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="330.0730058817013" width="394.8733017607526" x="-2176.5706294784454" y="2483.6827732895135"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="298.0234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="273.513671875" x="60.67981494287642" xml:space="preserve" y="16.024784190850824">u16 Rs485_Read_Data(u8* resp_buf,u8 size_buf )
{
		u8 rsp_val;
		u16 ret=0;
		if ((resp_buf==NULL)||(0 == size_buf))
		{
			return (gRET_NG);
		}
		rsp_val=resp_buf[1];
		switch (rsp_val)
		{
			case RS485_BMS_ID:
				Rs485_Rec_PCdata(resp_buf , size_buf);
				break;
			default: 
				Rs485_Rec_PCdata(resp_buf , size_buf);
				break;
		}
		return (ret);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n99">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="416.11709641032905" width="348.54186839918407" x="-2597.2865083041024" y="2397.6386827608862"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="356.828125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="292.17578125" x="28.18304357459192" xml:space="preserve" y="29.644485705164698">u16  Rs485_Rec_PCdata(u8* PCdtaBuff, u8 size_buf)
{
    u8 typedata=0;
    u16 ret=0;
	
		typedata=PCdtaBuff[2];
		switch (typedata)
		{
		case RS485_FUN_COMM1:
			Send_GainOffset_Data();
			break;
		case RS485_FUN_COMM2:
			Send_BMS_Data();
			break;
		case RS485_FUN_COMM3:
			Send_BQ769xxConfig_Data();
			break;
		case RS485_FUN_COMM4:
		  PcComm_Pro( PCdtaBuff, size_buf);
			break;
		default: break;
		}
		return (ret);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n100">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="267.6572462897009" x="-2133.715297421506" y="2664.1518883003914"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="131.82862314485055" y="20.184356488308367">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n101">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="218.18057048050127" x="-2176.5706294784454" y="2439.3140603128973"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="167.435546875" x="25.372511802750523" xml:space="preserve" y="12.833770550808367">#define RS485_BMS_ID  0x11<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n102">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="87.74552464495594" width="237.1579255854001" x="-2597.2865083041024" y="2309.8931581159304"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="62.8046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="198.759765625" x="19.199079980200167" xml:space="preserve" y="12.470418572478138">#define RS485_FUN_COMM1  0x01
#define RS485_FUN_COMM2  0x02
#define RS485_FUN_COMM3  0x03
#define RS485_FUN_COMM4  0x04<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n103">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="135.40071324542635" width="450.01776800083576" x="-3313.0072917334137" y="1813.1072646502685"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="121.609375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="426.16796875" x="11.924899625417765" xml:space="preserve" y="6.895669122713116">void Send_GainOffset_Data(void)
{ 
	 u8 DataBuff[3]={0};
	 DataBuff[0]=(u8)((VoltCellGainUV&amp;0xFF00)&gt;&gt;8);
	 DataBuff[1]=(u8)(VoltCellGainUV&amp;0x00ff);
	 DataBuff[2]=VoltCellOffSet;
	 Uart2Send(RS485_BMS_ID,RS485_FUN_COMM1,sizeof(DataBuff),DataBuff);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n104">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="449.13070486519166" width="450.01776800083576" x="-3313.0072917334137" y="1948.5079778956947"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="415.6328125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="429.501953125" x="10.257907437917765" xml:space="preserve" y="16.748946182595773">void Send_BMS_Data(void)
{
		u8 DataBuff[46]={0};
		u8 ia=0;

		for( ia=0; ia&lt;15; ia++ )
		{
			DataBuff[2*ia]=(gBMSData.BattPar.VoltCell[ia]&amp;0xFF00)&gt;&gt;8;
			DataBuff[2*ia+1]= gBMSData.BattPar.VoltCell[ia]&amp;0xFF;
		}
		DataBuff[30]=(gBMSData.BattPar.VoltLine)&gt;&gt;8;
		DataBuff[31]=gBMSData.BattPar.VoltLine&amp;0xFF;
		DataBuff[32]=(gBMSData.BattPar.TempCell[0])&gt;&gt;8;
		DataBuff[33]=gBMSData.BattPar.TempCell[0]&amp;0xFF;
		DataBuff[34]=(gBMSData.BattPar.TempCell[1])&gt;&gt;8;
		DataBuff[35]=gBMSData.BattPar.TempCell[1]&amp;0xFF;
		DataBuff[36]=(gBMSData.BattPar.TempCell[2])&gt;&gt;8;
		DataBuff[37]=gBMSData.BattPar.TempCell[2]&amp;0xFF;
		DataBuff[38]=(gBMSData.BattPar.CurrLine)&gt;&gt;8;
		DataBuff[39]=gBMSData.BattPar.CurrLine&amp;0xFF;
		DataBuff[40]=(gBMSData.BattPar.SOCSys)&gt;&gt;8;
		DataBuff[41]=gBMSData.BattPar.SOCSys&amp;0xFF;
		DataBuff[42]=(gBMSData.BalaPar.bala_ctrl_sw&gt;&gt;24)&amp;0xff;
		DataBuff[43]=(gBMSData.BalaPar.bala_ctrl_sw&gt;&gt;16)&amp;0xff;
		DataBuff[44]=(gBMSData.BalaPar.bala_ctrl_sw&gt;&gt;8)&amp;0xff;
		DataBuff[45]=gBMSData.BalaPar.bala_ctrl_sw&amp;0xff;
	  Uart2Send(RS485_BMS_ID,RS485_FUN_COMM2,sizeof(DataBuff),DataBuff);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n105">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="323.49302806701155" width="450.01776800083576" x="-3313.0072917334137" y="2397.6386827608862"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="283.322265625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="436.169921875" x="6.9239230629177655" xml:space="preserve" y="20.08538122100572">void Send_BQ769xxConfig_Data(void)
{
	  u8 DataBuff[12]={0};

		DataBuff[0]= Bq769xxReg.SysStatus.StatusByte;
		DataBuff[1]= Bq769xxReg.CellBal1.CellBal1Byte;
		DataBuff[2]= Bq769xxReg.CellBal2.CellBal2Byte;
		DataBuff[3]= Bq769xxReg.CellBal3.CellBal3Byte;
		DataBuff[4]= Bq769xxReg.SysCtrl1.SysCtrl1Byte;
		DataBuff[5]= Bq769xxReg.SysCtrl2.SysCtrl2Byte;
		DataBuff[6]= Bq769xxReg.Protect1.Protect1Byte;
		DataBuff[7]= Bq769xxReg.Protect2.Protect2Byte;
		DataBuff[8]= Bq769xxReg.Protect3.Protect3Byte;
		DataBuff[9]= Bq769xxReg.OVTrip;
		DataBuff[10]= Bq769xxReg.UVTrip;
		DataBuff[11]= Bq769xxReg.CCCfg;

    Uart2Send(RS485_BMS_ID,RS485_FUN_COMM3,sizeof(DataBuff),DataBuff);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n106">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="540.6716219493647" width="450.01776800083576" x="-3313.0072917334137" y="2721.1317108278977"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="518.541015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="264.443359375" x="92.78720431291777" xml:space="preserve" y="11.065303162182317">u16 PcComm_Pro(u8* dtaBuff, u8 size)
{   
		u8 typecomm =0;
		u16 ret=0;
		typecomm=dtaBuff[4];
		switch (typecomm)
		{
		case COMM_DSG_ON:
			Bq769xx_Oper_EN=OPER_ON;
			Bq769xx_Oper_Type=COMM_DSG_ON;
			break;
		case COMM_DSG_OFF:
			Bq769xx_Oper_EN=OPER_ON;
			Bq769xx_Oper_Type=COMM_DSG_OFF;
			break;
		case COMM_CHG_ON:
			Bq769xx_Oper_EN=OPER_ON;
			Bq769xx_Oper_Type=COMM_CHG_ON;
			break;
		case COMM_CHG_OFF:
		  Bq769xx_Oper_EN=OPER_ON;
			Bq769xx_Oper_Type=COMM_CHG_OFF;
		  break;	
		case COMM_CLEAR_ALERT:
			Bq769xx_Oper_EN=OPER_ON;
		  Bq769xx_Oper_Type=COMM_CLEAR_ALERT;
			break;
		case COMM_ENTER_SHIP:
			Bq769xx_Oper_EN=OPER_ON;
			Bq769xx_Oper_Type=COMM_ENTER_SHIP;
			break;
		default: break;
		}
		return (ret);
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n107">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="223.4128983879948" x="-2576.366706261656" y="2681.1571599476797"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="109.70644919399729" y="20.184356488308367">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n108">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="223.4128983879948" x="-2576.366706261656" y="2636.7884469710634"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="109.70644919399729" y="20.184356488308367">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n109">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="223.4128983879948" x="-2576.3667062616564" y="2592.419733994447"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="109.70644919399729" y="20.184356488308367">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n110">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.36871297661639" width="223.4128983879948" x="-2576.366706261657" y="2548.051021017831"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="109.70644919399729" y="20.184356488308367">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n111">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="486.8940653689725" width="698.2218752949532" x="-4211.574883137416" y="2234.2376454589253"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="445.03515625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="587.013671875" x="55.60410170997693" xml:space="preserve" y="20.929454559486203">void Uart2Send(unsigned char STData,unsigned char FunCom,unsigned char LengByte,unsigned char* Data)
{
    unsigned char i=0;
    unsigned char CRCnum=0;
    unsigned char SendData[UARTNunD+1]={0};

		RS485_Rce_OFF;
    
    SendData[0]=START_SYMBOL;
		CRCnum=START_SYMBOL;
    SendData[1]=STData;
    CRCnum+=STData;
    SendData[2]=FunCom;
    CRCnum+=FunCom;
    SendData[3]=LengByte;
    CRCnum+=LengByte;
    for(i=0;i&lt;LengByte;i++)
    {    
         SendData[i+4]=Data[i];
         CRCnum+=SendData[i+4];
    }
    SendData[LengByte+4]=0-CRCnum;
    
    for(i=0;i&lt;(LengByte+5);i++)
    {
			  Usart2SendData(SendData[i]); 
    }
		delay_us(100);
		RS485_Rce_ON;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n112">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="66.99345633646237" width="279.37744423612935" x="-4211.574883137416" y="2167.244189122463"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="233.125" x="23.126222118065016" xml:space="preserve" y="16.79555629323113">#define  RS485_Rce_OFF     PBout(15)=1 
#define  RS485_Rce_ON      PBout(15)=0 <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n113">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="24.783885097129996" width="270.94742194872913" x="-4036.6458976877616" y="2341.3447769871127"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="260.0" x="5.4737109743646215" xml:space="preserve" y="0.5911612985651118">半双工：禁用接收，进入发送状态。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n114">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="24.783885097129996" width="270.94742194872913" x="-4050.6329290777335" y="2670.611428465938"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="260.0" x="5.4737109743646215" xml:space="preserve" y="0.5911612985651118">半双工：发送完毕，进入接收状态。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n115">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="119.23011487811641" width="370.64631251767867" x="-3938.673352988273" y="2390.919569867087"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="62.8046875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="363.1640625" x="3.74112500883939" xml:space="preserve" y="28.21271368905809">开始组帧，
并累加校验和。
所有数据被组织在SendData连续地址的缓冲区中。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n116">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.41051553469265" width="105.84443253611232" x="-3938.673352988273" y="2563.79095609314"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="68.0" x="18.922216268056218" xml:space="preserve" y="1.404476517346211">各位取反<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n117">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.41051553469265" width="306.58999438767387" x="-229.7379102511198" y="3584.5237437813716"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="274.02197265625" x="16.284010865711934" xml:space="preserve" y="2.017025345471211">每200ms执行一次时间未到，直接返回。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n118">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="87.31589679820877" width="287.2538498751499" x="-14.871710123833878" y="3702.914991702425"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="252.408203125" x="33.52822170158717" xml:space="preserve" y="4.905018711604953">I2C一次读回40个字节的数据
从VC1,VC2,VC3.... TS1,TS2,TS3,CC
每个数据项占用2个字节
用memcpy复制到结构体中！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.05606677972640628" nodeRatioY="3.774758283725532E-15" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n119">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="37.319981080510956" width="198.11879508389427" x="-519.8061651620997" y="3366.9111103022674"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="183.4375" x="7.340647541947192" xml:space="preserve" y="9.309404602755421">#define  SYS_CELL_MAX       15 <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n120">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="37.319981080510956" width="198.11879508389427" x="-519.8061651620997" y="3329.5911292217565"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="157.43359375" x="20.342600666947135" xml:space="preserve" y="9.309404602755421">#define BQ769xxAddr   0x08<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n121">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="444.81780773529454" width="606.015638098039" x="602.9077977842182" y="4059.238737673164"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="371.529296875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="553.52734375" x="26.244147174019417" xml:space="preserve" y="36.644255430147496">u8 BQ769xx_DSGSET(u8 ONOFF)
{
    u8 ret=gRET_OK; 
    u8 rcd=0;
    
    if( ONOFF&gt;1)
    {
        return gRET_NG ;
    }
    rcd=IIC_ReadByte(BQ769xxAddr, SYS_CTRL2_RegAddr, &amp;(Bq769xxReg.SysCtrl2.SysCtrl2Byte));
    if(rcd!=gRET_OK)
    {
        return gRET_NG;
    }
    
    if(ONOFF==1)
    {
          IIC_WritByte(BQ769xxAddr, SYS_CTRL2_RegAddr, Bq769xxReg.SysCtrl2.SysCtrl2Byte|0x02); 
    }
    else
    {
          IIC_WritByte(BQ769xxAddr, SYS_CTRL2_RegAddr, Bq769xxReg.SysCtrl2.SysCtrl2Byte&amp;0xFD);
    }
    return ret;
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n122">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="444.81780773529454" width="606.015638098039" x="1263.5283394869632" y="4059.238737673164"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="400.931640625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="556.19921875" x="24.908209674019417" xml:space="preserve" y="21.943083555147496">u8 BQ769xx_CHGSET(u8 ONOFF)
{
    u8 ret=gRET_OK; 
    u8 rcd=0; 
    
    if( ONOFF&gt;1)
    {
        return gRET_NG ;
    }
    
    rcd = IIC_ReadByte(BQ769xxAddr, SYS_CTRL2_RegAddr,  &amp;Bq769xxReg.SysCtrl2.SysCtrl2Byte );
    
    if(rcd!=gRET_OK)
    {
        return gRET_NG ;
    }
    
    if(ONOFF==1)
    {
          IIC_WritByte(BQ769xxAddr, SYS_CTRL2_RegAddr, Bq769xxReg.SysCtrl2.SysCtrl2Byte|0x01 ); 
     }
     else
     {
          IIC_WritByte(BQ769xxAddr, SYS_CTRL2_RegAddr, Bq769xxReg.SysCtrl2.SysCtrl2Byte&amp;0xFE );
     }
    return ret ;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n123">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="24.783885097129996" width="279.3774442361281" x="-4211.574883137415" y="2142.4603040253332"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="260.921875" x="9.227784618064106" xml:space="preserve" y="0.5911612985651118">半双工RS485处于接收还是发送状态<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n124">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.521803714628504" width="220.54497018541804" x="-3091.4792024639446" y="2751.1317108278977"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.0234375" x="4.260766342708848" xml:space="preserve" y="2.9601206073143658">接收到的PC指令处理Process<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n125">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3081.593536365634" y="2824.590191554279"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="104.4765625" x="21.971145797821464" xml:space="preserve" y="1.7756409529397388">Discharge ON<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n126">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3038.182981984774" y="2890.9264832190447"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="112.46875" x="17.975052047821464" xml:space="preserve" y="1.7756409529397388">Discharge OFF<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n127">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3038.1829819847744" y="2948.079327624924"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="84.921875" x="31.748489547821464" xml:space="preserve" y="1.7756409529397388">Charge ON<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n128">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3038.182981984775" y="3011.46752180258"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="92.9140625" x="27.752395797821464" xml:space="preserve" y="1.7756409529397388">Charge OFF<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n129">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3038.1829819847753" y="3068.620366208459"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="79.578125" x="34.420364547821464" xml:space="preserve" y="1.7756409529397388">Clear Alert<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n130">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.15284440587925" width="148.41885409564327" x="-3038.1829819847753" y="3125.7732106143385"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="123.1796875" x="12.619583297821464" xml:space="preserve" y="1.7756409529397388">Enter Ship Mode<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n131">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.836301373630477" width="113.83204818790489" x="-2433.9602341330533" y="2499.5796851009995"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="102.6875" x="5.572274093952274" xml:space="preserve" y="0.11736943681535195">bit[2]功能指令<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n132">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="49.30261394268405" width="120.34668628696534" x="-2473.300494160627" y="2725.525872924296"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="43.203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="76.8984375" x="21.724124393482725" xml:space="preserve" y="3.04974447134191">功能码为4
设置指令<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n133">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="80.60248880953372" width="238.08330031538014" x="-3551.090592048794" y="2810.6535145425255"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="43.203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.0" x="13.041650157690128" xml:space="preserve" y="18.69968190476675">这个函数光设置了两个变量
并没有执行写寄存器的操作！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n134">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="193.23824386269428" width="238.08330031538048" x="-3551.090592048794" y="2891.2560033520595"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="151.046875" x="43.51821265769013" xml:space="preserve" y="13.762676618847308">typedef enum 
{
	COMM_MIN=0,
	COMM_DSG_ON =1,
	COMM_DSG_OFF=2,
	COMM_CHG_ON=3,
	COMM_CHG_OFF=4,
	COMM_CLEAR_ALERT=5,
	COMM_ENTER_SHIP=6,
	COMM_MAX=7,
}	eCOMM_TYPE;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n135">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="247.0781249999999" x="-3422.1804549324283" y="3934.153092542427"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="147.125" x="49.9765625" xml:space="preserve" y="4.998920610175446">反转端口让LED灯闪<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n136">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="247.0781249999999" x="-3080.5902274662144" y="3910.653092542427"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="134.6953125" x="56.19140625" xml:space="preserve" y="4.998920610175446">500mS标志被置位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n137">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="247.0781249999999" x="835.1577977842181" y="3404.2310913827782"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="166.6953125" x="40.191406249999886" xml:space="preserve" y="4.998920610175446">100mS定时到才执行！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n138">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187599" y="3515.1474409630155"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="104.4765625" x="22.737115420640976" xml:space="preserve" y="4.998920610175446">Discharge ON<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n139">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187597" y="3578.7468446833664"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="112.46875" x="18.74102167064109" xml:space="preserve" y="4.998920610175446">Discharge OFF<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n140">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187599" y="3656.137002297465"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="84.921875" x="32.514459170640976" xml:space="preserve" y="4.998920610175446">Charge ON<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n141">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187599" y="3739.313507659286"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="92.9140625" x="28.518365420640976" xml:space="preserve" y="4.998920610175446">Charge OFF<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n142">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187599" y="3802.912911379637"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="79.578125" x="35.186334170640976" xml:space="preserve" y="4.998920610175446">Clear Alert<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n143">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="149.95079334128206" x="826.5579254187599" y="3866.512315099988"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="78.7109375" x="35.619927920640976" xml:space="preserve" y="4.998920610175446">Enter Ship<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n144">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="45.44420026409739" width="240.97065178213086" x="967.9527841001266" y="4059.238737673164"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="196.9375" x="22.016575891065486" xml:space="preserve" y="10.921318882048581">Discharge ON/OFF Control<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n145">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="32.48895404437485" width="266.25188940518876" x="836.0697429866282" y="4187.453445806108"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="240.5546875" x="12.848600952594325" xml:space="preserve" y="4.443695772187311">Read back SYS_CTRL2 Register<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n146">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.84640536117263" width="266.25188940518876" x="907.1658563949748" y="4311.8272130774185"/>
          <y:Fill color="#FFFF99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="206.78125" x="29.735319702594325" xml:space="preserve" y="1.6224214305866553">bit[1]=1, ON. (0x1&lt;&lt;2) = 0x2<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n147">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.84640536117263" width="266.25188940518876" x="907.1658563949748" y="4374.316167121793"/>
          <y:Fill color="#FFFF99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="246.8046875" x="9.723600952594325" xml:space="preserve" y="1.6224214305866553">bit[1]=0, OFF. 0x1111,1101=0xFD<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n148">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="32.48895404437485" width="266.25188940518876" x="836.0697429866282" y="4134.682937937261"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="250.3125" x="7.9696947025943246" xml:space="preserve" y="4.443695772187311">Read back -&gt; Modify -&gt; Write back<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n149">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="45.44420026409739" width="240.97065178213086" x="1628.5733258028715" y="4059.238737673164"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="177.3828125" x="31.793919641065486" xml:space="preserve" y="10.921318882048581">Charge ON/OFF Control<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n150">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="32.48895404437485" width="266.25188940518876" x="1474.3462404940042" y="4146.90037535747"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="250.3125" x="7.9696947025943246" xml:space="preserve" y="4.443695772187311">Read back -&gt; Modify -&gt; Write back<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n151">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="32.48895404437485" width="266.25188940518876" x="1512.276121662578" y="4190.973559898623"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="240.5546875" x="12.848600952594325" xml:space="preserve" y="4.443695772187311">Read back SYS_CTRL2 Register<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n152">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.266491729876407" width="266.25188940518876" x="1550.1794706025653" y="4325.472796552806"/>
          <y:Fill color="#FFFF99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="214.7734375" x="25.739225952594325" xml:space="preserve" y="0.8324646149385444">bit[0]=1, OFF. (0x1&lt;&lt;1) = 0x1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n153">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.266491729876407" width="266.25188940518876" x="1550.1794706025653" y="4390.330988733457"/>
          <y:Fill color="#FFFF99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="245.921875" x="10.165007202594325" xml:space="preserve" y="0.8324646149385444">bit[1]=0, OFF. 0x1111,1110=0xFE<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n154">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="28.269245275665753" width="259.6468749999998" x="786.7515893516006" y="2028.1874978718697"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="244.0" x="7.8234374999999545" xml:space="preserve" y="2.333841387832763">前面设置标志位，这里延后执行！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n155">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="269.2140460166489" x="1342.0546745517872" y="3459.4637410288206"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="236.53125" x="16.341398008324404" xml:space="preserve" y="4.998920610175446">唤醒 Ship Mode -&gt; Normal Mode<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n156">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="22.22839903835461" width="196.38239579276672" x="1414.8863247756694" y="3505.7743239746346"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="180.6953125" x="7.843541646383301" xml:space="preserve" y="1.7636135816774186">500mS定时已到，且唤醒标志为1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n157">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="22.22839903835461" width="196.38239579276672" x="1386.286585450107" y="3553.1136916857304"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="166.673828125" x="14.8542838338833" xml:space="preserve" y="1.7636135816774186">唤醒计数器计数到最高位为1了<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n158">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="22.22839903835461" width="153.26733637353107" x="1429.4016448693426" y="3605.342090724085"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="106.673828125" x="23.29675412426559" xml:space="preserve" y="1.7636135816774186">唤醒计数器到1秒了<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n159">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="393.85893984273025" width="322.3281249999999" x="2159.6535163404233" y="3999.034032956034"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="312.724609375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="213.28515625" x="54.521484375" xml:space="preserve" y="40.567165233865126">void BQ769xx_Init(void)
{     
      u8  rcd=0;
      //--------设置电池，温度分段布------//
      BQ769xx_Set_CellMap();
     //---------参数初始化-------------//
      BQ769xx_Init_Para();
     //---------读取电压增益和偏置-----//
      BQ769xx_Read_Gain();
     //----------参数配置-------------//
      rcd=BQ769xx_Write_Config();
	    
      if(rcd==gRET_OK)
      {
          BQ769xx_Init_State=1;
      }
      else
      {
          BQ769xx_Init_State=0;
      }
}
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n160">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="15.784829718556693" width="112.33171951834458" x="1209.9476555863664" y="3661.0068606001605"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="54.165859759172235" y="5.892414859278233">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n161">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="28.269245275665753" width="291.98812499999974" x="1440.8905589691421" y="828.2544810632442"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="273.34375" x="9.322187499999927" xml:space="preserve" y="2.3338413878328765">在TS1引脚上产生一个上升沿唤醒芯片<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n162">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="150.19814342363986" x="2491.8841305094284" y="877.6643925943797"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="137.8515625" x="6.173290461819761" xml:space="preserve" y="-0.923477661697234">5节电池1F=1,1111<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n163">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="128.16963336441847" x="2491.8841305094284" y="1010.931954082474"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="110.296875" x="8.936379182209294" xml:space="preserve" y="-0.923477661697234">5串,1F=1,1111<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n164">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="150.19814342363986" x="2491.8841305094284" y="919.5173405481421"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="136.9765625" x="6.610790461819761" xml:space="preserve" y="-0.923477661697234">4串电池17=1,0111<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n165">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="128.16963336441847" x="2491.8841305094284" y="965.2246473153082"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.421875" x="9.373879182209294" xml:space="preserve" y="-0.923477661697234">3串,13=1,0011<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n166">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="345.5216499421589" x="2615.896210934409" y="1144.8835568699114"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="324.0" x="10.760824971079273" xml:space="preserve" y="-0.923477661697234">初始化结构体，结构体对应到芯片里的寄存器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n167">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="159.85446411893952" x="2801.563396757628" y="1185.3886297651309"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="143.59375" x="8.130357059469588" xml:space="preserve" y="-0.923477661697234">SYS_CTRL1寄存器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n168">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.75460717660542" width="159.85446411893952" x="2801.563396757628" y="1243.6101502415793"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="143.59375" x="8.130357059469588" xml:space="preserve" y="-0.923477661697234">SYS_CTRL2寄存器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n169">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.216500886022345" width="526.6499528728999" x="2434.767908003668" y="1422.7220559838893"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="516.0" x="5.324976436450015" xml:space="preserve" y="1.3074691930112294">三个保护寄存器的设置，过流，短路电流，动作延时，欠压过压保护延时<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n170">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="212.76284446362877" x="2773.6007101817204" y="1498.6509947514555"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="201.375" x="5.693922231814213" xml:space="preserve" y="3.8985184369555554">I2C读取Gain和Offset寄存器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n171">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.157605016446723" width="263.8281249999999" x="2381.964735876568" y="756.6709518534645"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="247.59375" x="8.1171875" xml:space="preserve" y="2.7780212582233617">用bit来表示电池数，1bit表示1节。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n172">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="66.93298900514935" width="568.106740776011" x="2418.256813869338" y="1530.0495941253669"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="282.05337038800553" y="31.466494502574733">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n173">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="52.12699332546674" width="803.151922190972" x="2418.256813869338" y="1604.25972078093"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="399.57596109548604" y="24.063496662733314">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n174">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="212.76284446362877" x="3008.6458915966814" y="1572.8611214070188"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="165.3984375" x="23.682203481814213" xml:space="preserve" y="3.8985184369555554">拼接移位,uV/1000=mV<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n175">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="263.4687499999997" width="400.7430763964278" x="3488.8316639418504" y="1478.9385568699113"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="239.21875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="275.4765625" x="62.633256948213784" xml:space="preserve" y="12.124999999999773">u16 LimitMaxMin(u16 InValue,u16 gMax,u16 gMin)
{
		u16 valueout=0;
	
	  valueout=InValue;
    if(InValue&gt;gMax )
    {
        valueout=gMax;
    }
 
    if(InValue&lt;gMin )
    {
        valueout=gMin;
    }
    return valueout;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n176">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="400.7430763964279" x="3488.8316639418504" y="1447.539957496"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="356.0" x="22.371538198213784" xml:space="preserve" y="3.8985184369555554">最大最小值限定，超过则设置为最大值或最小值。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n177">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="263.4687499999997" width="305.4294792084713" x="3889.5747403382784" y="1478.938556869911"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="219.431640625" x="42.99891929173555" xml:space="preserve" y="92.98144531249977">#define OV_THRESH_MAX         4700   
#define OV_THRESH_MIN         3150

#define UV_THRESH_MAX         3100   
#define UV_THRESH_MIN         1580<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n178">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="58.04939159733965" width="305.42947920847143" x="3889.5747403382784" y="1478.9385568699113"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="43.203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="170.2890625" x="67.57020835423555" xml:space="preserve" y="7.423133298669882">OverVoltage 过压阈值
UnderVoltage 欠压阈值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n179">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="38.801597213752416" width="716.1666975728366" x="2418.256813869338" y="1663.6638517568103"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="356.08334878641836" y="17.40079860687615">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n180">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="66.93298900514935" width="766.4591204526254" x="2669.9587404239423" y="1756.060567864762"/>
          <y:Fill color="#FF00FF" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="662.7421875" x="51.858466476312515" xml:space="preserve" y="21.665713252574733">过压阈值减去ADC的直流偏移量，乘以1000是从uV转换为mV，再除以Gain是什么意思？？？<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n181">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.72399548562555" width="300.1182189737559" x="2653.5637013192118" y="1862.5986306599432"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="220.8984375" x="39.60989073687779" xml:space="preserve" y="10.561216492812719">写配置，通过I2C写各个寄存器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n182">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="44.72399548562555" width="541.0241070119245" x="2709.8468788646437" y="1937.3226261455688"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="527.59375" x="6.715178505962285" xml:space="preserve" y="10.561216492812719">写SYS_CTRL1寄存器，连续读保护寄存器，这里寄存器地址写错了估计。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n183">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="241.40541206557003" width="436.6476872962851" x="1741.3861206384831" y="1606.156234985175"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="195.115234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="379.345703125" x="28.65099208564243" xml:space="preserve" y="23.145088845285045">const u16 OCV_Table[100]= 
{  
		4194,4171,4155,4142,4132,4124,4117,4111,4106,4100, // 100%~91%
		4095,4089,4082,4074,4066,4056,4047,4036,4027,4016, // 90%~81% 
		4005,3995,3984,3974,3964,3954,3945,3936,3926,3918, // 80%~71% 
		3909,3900,3892,3883,3869,3856,3846,3836,3826,3815, // 70%~61% 
		3805,3793,3782,3770,3758,3746,3734,3723,3712,3702, // 60%~51% 
		3692,3683,3675,3667,3660,3654,3648,3643,3638,3633, // 50%~41% 
		3628,3624,3619,3615,3611,3607,3603,3597,3591,3586, // 40%~31% 
		3582,3577,3573,3568,3563,3557,3552,3546,3540,3533, // 30%~21% 
		3526,3518,3510,3501,3492,3482,3473,3461,3449,3436, // 20%~11% 
		3423,3409,3397,3387,3380,3371,3363,3353,3340,3292  // 10%~1% 
};
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n184">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="223.42316135300018" x="1954.6106465817684" y="1606.156234985175"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="210.2265625" x="6.598299426500034" xml:space="preserve" y="3.8985184369555554">电量百分比%与电压的对应表<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n185">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="363.6655524309534" x="1814.368255503815" y="1816.1630476768337"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="311.2421875" x="26.21168246547677" xml:space="preserve" y="3.8985184369555554">放大1000倍，避免小数运算。4194=4.194V<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n186">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="481.18814313843393" x="1525.1323171832432" y="1363.8036629526996"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="377.796875" x="51.69563406921702" xml:space="preserve" y="3.8985184369555554">额定容量=电池包总容量*电池包并联数*安时数（秒）<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n187">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="49.90609397351443" width="486.55531657231893" x="1546.2601763659652" y="1302.4050635787885"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="43.203125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="371.7421875" x="57.40656453615952" xml:space="preserve" y="3.351484486757272">#define CNT_H_200MS_NUM    18000  //60*60*5
gBMSConfig.Type.CapaRate=200;      //2.00AH安时<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n188">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="31.398599373911225" width="382.0830633200518" x="1650.7324296182321" y="1271.0064642048771"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="332.2265625" x="24.92825041002584" xml:space="preserve" y="3.8985184369555554">1小时=60分=60*60秒，5小时=5*60*60=18000<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n189">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="28.269245275665753" width="259.6468749999999" x="190.0" y="1202.5712830100715"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="140.8984375" x="59.374218749999955" xml:space="preserve" y="2.333841387832763">所有定时标志位清0<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n190">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.556047910615803" width="88.49835306019315" x="1247.2572422167234" y="1413.6741501287536"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="36.0" x="26.24917653009652" xml:space="preserve" y="-0.12236666969215548">额定容量<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n191">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.556047910615803" width="88.49835306019315" x="1247.2572422167232" y="1442.5839633744026"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="36.0" x="26.24917653009652" xml:space="preserve" y="-0.12236666969215548">实际容量<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n192">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.556047910615803" width="88.49835306019315" x="1247.2572422167232" y="1475.2894915968786"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="67.125" x="10.68667653009652" xml:space="preserve" y="-0.12236666969215548">remaing 剩余容量<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n193">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="41.543089379298294" width="230.23917598223" x="1485.238569790166" y="1479.40884919949"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="210.234375" x="10.00240049111494" xml:space="preserve" y="4.07037281464909">5AH就是以5A的电流放电，可以持续1小时。
这里有两个参数，一是放电电流5A，另一个是时间1小时。
将这2个参数切片为，10mA和200mS。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n194">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.111987613813767" width="168.84824630899118" x="1330.3387485410426" y="1363.151322839546"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="147.14453125" x="10.851857529495646" xml:space="preserve" y="0.7552125569068266">应该是100，为避免小数，放大1000倍。
保留小数点后1位，100.0<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n195">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.556047910615803" width="101.49878522629126" x="2317.3926676258225" y="3589.1301170508177"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="74.24609375" x="13.626345738145574" xml:space="preserve" y="-0.12236666969192811">200mS计5次就是1s<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n196">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.556047910615803" width="83.70263808336642" x="2293.5016016619984" y="3745.555581124983"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="52.44921875" x="15.626709666683382" xml:space="preserve" y="-0.12236666969192811">1s执行一次！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n197">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="37.55745034770155" width="430.5792776164923" x="2928.2421794680804" y="3467.968750694226"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="20" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="404.0" x="13.289638808246309" xml:space="preserve" y="4.527748611350944">这应该是根据电池组的温度，定义一个比例。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n198">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.41047567763337" width="195.9216462948899" x="2764.8936806601478" y="3842.574197511085"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="180.8984375" x="7.5116043974448985" xml:space="preserve" y="3.804847213816629">如果电池温度比上一次记录的值大10度，就更新。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n199">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.41047567763337" width="195.9216462948899" x="2764.8936806601478" y="3958.9934288217237"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="180.8984375" x="7.5116043974448985" xml:space="preserve" y="3.804847213816629">如果电池温度比上一次记录的值大10度，就更新。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n200">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.41047567763337" width="195.9216462948899" x="2764.8936806601478" y="3900.7838131664043"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.8984375" x="39.5116043974449" xml:space="preserve" y="3.804847213816629">这是正负10度的判断呀！！！！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n201">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="24.378189163584693" width="239.07657434899932" x="-1476.1685476131531" y="1800.0741417729741"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="20" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="228.462890625" x="5.306841861999601" xml:space="preserve" y="-2.061881980707767">定时器1中断服务函数ISR<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n202">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.385100595341328" width="318.6249999999998" x="-871.5891739655749" y="1796.1017874999998"/>
          <y:Fill color="#FFFF99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="270.091796875" x="24.266601562499886" xml:space="preserve" y="2.34196436017055">时间驱动：10ms,100ms,200ms,500ms,1s,10s,1m<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n203">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.665651189732216" width="210.4902555910228" x="407.6359941976982" y="929.6656511897322"/>
          <y:Fill color="#CCFFCC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="bold" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="181.919921875" x="14.285166858011394" xml:space="preserve" y="1.081849032366108">产生时间间隔标志位
10ms,100ms,200ms,500ms,1s,10s,1m<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n204">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.665651189732216" width="210.4902555910228" x="432.23533772873" y="960.6595583281255"/>
          <y:Fill color="#CCFFCC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="bold" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="96.8125" x="56.838877795511394" xml:space="preserve" y="7.207337313616108">接收并解析串口协议<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n205">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="187.46840797380457" width="366.82902082518353" x="-1679.22401572132" y="2339.6335371516934"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="301.076171875" x="32.87642447509188" xml:space="preserve" y="10.87775867440223">static u16 Uart1ErrCountTime;
static u8 Uart2Recv[UARTNunD]={0};
static u8 Uart2RecvBuf[UARTNunD]={0};
static u8 RBUp2=0;
static u8 RBDown2=0;
static u8 Uart2ACC=0;
static u8 Uart2CntR=0;
static u8 Uart2CntTT=0;
static u8 Uart2Stt=0;
static u8 Uart2_State=0;
static u16  Uart2ErrCountTime=0; //通信数据丢失时计时
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n206">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="98.53516946436935" width="328.9630298611505" x="-1302.6968643468829" y="2339.6335371516934"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="20" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="77.505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="287.388671875" x="20.78717899307526" xml:space="preserve" y="10.514655044684787">RBDown2指向缓冲区的开始[0], 
RBUp2指向缓冲区的最后[x], 
UARTNunD是缓冲区的大小。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n207">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.327106330458378" width="204.77999632362196" x="-1543.120729128037" y="2658.348446429704"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="180.8984375" x="11.940779411811036" xml:space="preserve" y="3.263162540229132">前指针到达最大值了，赋零。从头开始。[0] .... [x] <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n208">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.327106330458378" width="154.67416401678713" x="-1303.7274160837064" y="2623.2087709754815"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="137.7890625" x="8.442550758393509" xml:space="preserve" y="3.263162540229132">读取串口数据，存入Uart2Recv数组。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n209">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.327106330458378" width="154.67416401678713" x="-1320.0686287060284" y="2726.002586344992"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="137.7890625" x="8.442550758393509" xml:space="preserve" y="3.263162540229132">读取串口数据，存入Uart2Recv数组。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n210">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.533909881981003" width="328.9630298611505" x="-1302.6968643468829" y="2438.168706616063"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="264.70703125" x="32.12799930557526" xml:space="preserve" y="3.916369003490672">RBUp2相当于写指针，RBDown2相当于读指针。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n211">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="47.69346744398911" width="252.08330405252173" x="27.14538324405885" y="1981.9651007063635"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="216.68359375" x="17.699855151260863" xml:space="preserve" y="7.145561846994497">RBDown2读指针
从Uart2Recv接收缓冲区中读取一个字节<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n212">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="30.201566526062493" width="186.3588969905836" x="-176.76059773831543" y="2045.5074956902358"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="190.673828125" x="-2.1574655672081917" xml:space="preserve" y="5.75019732553119">读指针到达最大值，从0重新开始。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n213">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="19.51232230060407" width="186.3588969905836" x="-159.21351374652474" y="2085.138285584031"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="178.0234375" x="4.16772974529178" xml:space="preserve" y="0.4055752128019776">Uart2Stt状态机变量，初始值为0.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n214">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-165.85374226689743" y="2146.168063318565"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="76.0" x="6.689971656169263" xml:space="preserve" y="-0.881898862840444">状态机进入下一状态<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n215">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.770374479798761" width="141.6705704693091" x="-4.191824335649031" y="2189.3789663238613"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.0" x="12.835285234654549" xml:space="preserve" y="-0.01520338510044894">有效数据暂存到另外一个缓冲区<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n216">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-16.468867654188614" y="2131.0074773019746"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="68.0" x="10.689971656169263" xml:space="preserve" y="-0.881898862840444">判断读到帧头字节<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n217">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.770374479798761" width="150.48774968514596" x="-121.84486475866615" y="2280.427656416254"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="130.671875" x="9.907937342572978" xml:space="preserve" y="-0.01520338510044894">不是期望的帧头字节，所有变量清0.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n218">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.50696602163839" width="115.78580076008376" x="-388.2555189855262" y="2116.9242775825196"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="86.0078125" x="14.888994130041908" xml:space="preserve" y="3.402897073319309">状态0:起始字符<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n219">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.50696602163839" width="115.78580076008376" x="-388.2555189855262" y="2364.318590980722"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="86.0078125" x="14.888994130041908" xml:space="preserve" y="3.402897073319309">状态1:从机地址<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n220">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.50696602163839" width="115.78580076008376" x="-388.2555189855261" y="2469.0842674209302"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="86.0078125" x="14.888994130041851" xml:space="preserve" y="3.402897073319309">状态2:功能指令<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n221">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.50696602163839" width="115.78580076008376" x="-388.2555189855261" y="2557.6720347420905"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="86.0078125" x="14.888994130041851" xml:space="preserve" y="3.402897073319309">状态3:数据长度<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n222">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.50696602163839" width="115.78580076008376" x="-388.2555189855261" y="2676.9072676423357"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="91.33984375" x="12.222978505041851" xml:space="preserve" y="3.402897073319309">状态4: CRC校验<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n223">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-168.5620083012658" y="2382.5104146243516"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="76.0" x="6.689971656169263" xml:space="preserve" y="-0.881898862840444">状态机进入下一状态<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n224">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="107.40720924932728" x="-147.28415489568283" y="2397.5317578896843"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.33203125" x="-0.962411000336374" xml:space="preserve" y="-0.881898862840444">累加，用于计算CRC校验和。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n225">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.770374479798761" width="141.6705704693091" x="-69.6789123893915" y="2412.553101155017"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.0" x="12.835285234654549" xml:space="preserve" y="-0.01520338510044894">有效数据暂存到另外一个缓冲区<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n226">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-151.21317439477014" y="2426.3234756348156"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="80.44921875" x="4.465362281169263" xml:space="preserve" y="-0.881898862840444">接收到的有效个数加1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n227">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-162.30687650984012" y="2484.7213229503127"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="76.0" x="6.689971656169263" xml:space="preserve" y="-0.881898862840444">状态机进入下一状态<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n228">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="107.40720924932728" x="-149.75148395228535" y="2500.1793654483477"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.33203125" x="-0.962411000336374" xml:space="preserve" y="-0.881898862840444">累加，用于计算CRC校验和。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n229">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.770374479798761" width="141.6705704693091" x="-70.82092669910622" y="2515.6374079463826"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.0" x="12.835285234654549" xml:space="preserve" y="-0.01520338510044894">有效数据暂存到另外一个缓冲区<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n230">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-153.9116222454366" y="2529.4077824261813"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="80.44921875" x="4.465362281169263" xml:space="preserve" y="-0.881898862840444">接收到的有效个数加1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n231">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-222.60655872697313" y="2587.0400299689104"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="76.0" x="6.689971656169263" xml:space="preserve" y="-0.881898862840444">状态机进入下一状态<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n232">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="107.40720924932728" x="-148.0593397738663" y="2601.640321784063"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.33203125" x="-0.9624110003363455" xml:space="preserve" y="-0.881898862840444">累加，用于计算CRC校验和。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n233">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.770374479798761" width="141.6705704693091" x="-69.40705461351234" y="2616.2406135992155"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.0" x="12.835285234654549" xml:space="preserve" y="-0.01520338510044894">有效数据暂存到另外一个缓冲区<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n234">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-151.27681840935082" y="2646.3526097765853"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="80.44921875" x="4.465362281169263" xml:space="preserve" y="-0.881898862840444">接收到的有效个数加1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n235">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="89.37994331233853" x="-151.27681840935082" y="2734.5294969652796"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="80.44921875" x="4.465362281169263" xml:space="preserve" y="-0.881898862840444">接收到的有效个数加1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n236">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.94825789817844" width="109.89173628551484" x="-179.33330246150175" y="2776.8210346121928"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="84.0" x="12.945868142757405" xml:space="preserve" y="1.5737383240893905">已经接到到所有的数据<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n237">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.036983524319226" width="104.90823728851072" x="-222.24980508899142" y="2808.385056839624"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="100.8984375" x="2.0048998942553453" xml:space="preserve" y="-0.881898862840444">状态机清0，从0重新开始。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n238">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.94825789817844" width="163.8435297748201" x="-115.70501125115848" y="2837.659098605048"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="136.44921875" x="13.697155512410049" xml:space="preserve" y="1.5737383240893905">CRC校验和一定是0吗？这里很奇怪!!!<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n239">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="79.07405795002853" width="81.27589074569403" x="-1947.333941877499" y="2585.077830350363"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="72.60546875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="48.44921875" x="16.41333599784707" xml:space="preserve" y="3.2342946000144366">解析数据
[0] 同步帧头
[1] 设备地址
[2] 功能指令
[3] 数据长度
[4~n-1] 数据
[n] CRC校验<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n240">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="116.37705759415837" x="-2102.5077912325305" y="2608.546670264221"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="100.89453125" x="7.741263172079016" xml:space="preserve" y="-1.1280945469861763">判断[1]是不是本设备的地址
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n241">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="72.17558822942635" x="-2176.5706294784454" y="2439.3140603128973"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="52.0" x="10.087794114713233" xml:space="preserve" y="-1.1280945469861763">本机设备地址
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n242">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="45.271520765928585" width="152.48936916665184" x="-3313.0072917334137" y="1767.8357438843398"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#993366" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="134.40625" x="9.041559583326034" xml:space="preserve" y="5.934588507964236">u32 VoltCellGainUV = 0;
u8  VoltCellOffSet=0;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n243">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="152.48936916665195" x="-3142.1229819669466" y="1851.5990761225862"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="133.80859375" x="9.340387708326034" xml:space="preserve" y="-1.1280945469861763">电流ADC增益是32bit的，只取16bits.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n244">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="40.33897434711605" x="-3029.9725871474106" y="1869.242298975194"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="24.44921875" x="7.944877798558082" xml:space="preserve" y="-1.1280945469861763">高8位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n245">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="40.33897434711605" x="-3070.311561494527" y="1883.9286582471902"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="24.44921875" x="7.944877798558082" xml:space="preserve" y="-1.1280945469861763">低8位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n246">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="93.2651781877629" x="-3123.2377653351737" y="1898.7099452183488"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="52.890625" x="20.187276593881506" xml:space="preserve" y="-1.1280945469861763">电流ADC偏置<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n247">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.08670899571291" width="211.0815946930228" x="-3170.0612769310596" y="2036.0680130948176"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.9306640625" x="-0.9245346847387736" xml:space="preserve" y="4.417866216606399">15串电池的电压，16bits拆分成高8位和低8位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n248">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="40.33897434711605" x="-2969.606530355886" y="2073.258224667797"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="24.44921875" x="7.944877798558082" xml:space="preserve" y="-1.1280945469861763">高8位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n249">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="11.544592156027761" width="40.33897434711605" x="-2989.926736038075" y="2088.3151895021083"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="24.44921875" x="7.944877798558082" xml:space="preserve" y="-1.1280945469861763">低8位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n250">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="278.4536259704563" x="-3306.0637010700198" y="2114.965940627383"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="137.2268129852282" y="12.68752299747348">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n251">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="105.85387989787193" x="-3027.6100750995633" y="2114.8028168238247"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="105.123046875" x="0.36541651143579656" xml:space="preserve" y="6.562034716223479">电池包总电压，16位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n252">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="88.62180716856903" width="302.1523304399051" x="-3306.0637010700198" y="2144.3409866223296"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="149.0761652199526" y="42.31090358428446">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n253">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="105.85387989787193" x="-3003.9113706301146" y="2173.9643672091406"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="89.01953125" x="8.417174323935797" xml:space="preserve" y="6.562034716223479">TS1/2/3三组温度值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n254">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="278.4536259704563" x="-3306.0637010700198" y="2232.9627937908986"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="137.2268129852282" y="12.68752299747348">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n255">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="105.85387989787193" x="-3027.6100750995633" y="2232.9627937908986"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="105.123046875" x="0.36541651143579656" xml:space="preserve" y="6.562034716223479">电池包总电流，16位。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n256">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="278.4536259704563" x="-3306.0637010700198" y="2262.337839785845"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="137.2268129852282" y="12.68752299747348">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n257">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="22.15258368044772" width="164.62055136698507" x="-3027.6100750995633" y="2269.560302100344"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="149.16015625" x="7.730197558492364" xml:space="preserve" y="4.175901215223803">电池包剩余电量,避免小数*10,99.9%=999<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n258">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="58.039193305613594" width="325.85103490935387" x="-3306.0637010700198" y="2292.337839785845"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="160.925517454677" y="27.01959665280674">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n259">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.375045994946618" width="95.68465295905742" x="-2980.212666160666" y="2307.572721230491"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="16.2509765625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="84.0" x="5.842326479528765" xml:space="preserve" y="6.562034716223479">均衡开关开启状态
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n260">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="128.68390281930408" width="128.41143532162948" x="-3027.2782357932497" y="2482.612506266708"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="33.40234375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="112.0" x="8.205717660814571" xml:space="preserve" y="47.64077953465221">将这几个寄存器的值
一并打包串口上传。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n261">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.41051553469265" width="183.71160436430125" x="-3968.081434371425" y="2617.201192279539"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="167.6328125" x="8.039395932150455" xml:space="preserve" y="1.404476517346211">Tx one Byte each time.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n262">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.41051553469265" width="119.92823404938474" x="-318.2654665211405" y="3372.3658430751766"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="85.796875" x="17.06567952469237" xml:space="preserve" y="1.404476517346211">共15节电池<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n263">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.41051553469265" width="119.92823404938474" x="-316.00393556440184" y="3335.0458619946658"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="92.8984375" x="13.51489827469237" xml:space="preserve" y="1.404476517346211">芯片I2C地址<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n264">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.778510225114246" width="130.21529538873804" x="-262.36632061716807" y="3767.8095196033514"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="116.8984375" x="6.658428944369007" xml:space="preserve" y="3.4888644875572936">依次循环处理这15节电池的数据<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n265">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.116068515587926" width="266.2548418336311" x="-459.08521310489743" y="3533.0243776454026"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="131.12742091681554" y="6.558034257794134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n266">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.778510225114246" width="130.21529538873804" x="-192.83037127126636" y="3531.19315679064"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="92.0" x="19.107647694369007" xml:space="preserve" y="3.4888644875572936">这个数据有什么用？？？<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n267">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.778510225114246" width="223.2044976879088" x="-343.26396037319194" y="3793.619039206703"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.8984375" x="5.153030093954385" xml:space="preserve" y="3.4888644875572936">如果该位为1则表示该位接有电池，为0则表示为空，跳过。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n268">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.778510225114246" width="279.51713354626577" x="-268.32489622886146" y="3822.668748012793"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="245.4453125" x="17.035910523132884" xml:space="preserve" y="3.4888644875572936">The MSB is symbol bit, 1 represents negative, 0 represents positive.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n269">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="162.71637580398217" x="-212.40573151575956" y="3854.723001141715"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="147.4296875" x="7.643344151991073" xml:space="preserve" y="1.524354738013244">0x100=256, convert negative to positive.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n270">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="116.49261699119052" x="-252.7164316513197" y="3928.74621901164"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="104.50390625" x="5.994355370595258" xml:space="preserve" y="1.524354738013244">positive value, keep original.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n271">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="267.51990012597344" x="-156.79310403688385" y="3891.734610076677"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.03515625" x="27.742371937986718" xml:space="preserve" y="1.524354738013244">单节电池电压计算= [(高8位+低8位)*增益倍数]/1000-偏置值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n272">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="137.87670158072186" x="204.44781290964994" y="3891.734610076677"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="99.58203125" x="19.147335165360914" xml:space="preserve" y="1.524354738013244">除以1000是将uV转换为mV<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n273">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="191.32292270801221" x="177.72470234600476" y="3908.5841008027037"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="182.69140625" x="4.315758229006093" xml:space="preserve" y="1.524354738013244">数据手册中标明Gain的单位是uV, Offset单位是mV.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n274">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="87.60276773319572" x="-417.1708749324355" y="3972.8988915249997"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="72.4765625" x="7.56310261659786" xml:space="preserve" y="1.524354738013244">Next Single Battery<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n275">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="20.460721883275824" width="130.93754162018786" x="-308.14478119770695" y="4002.7694368815646"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="105.34765625" x="12.794942685093929" xml:space="preserve" y="3.3299703166380823">右移1位，1位表示1节电池！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n276">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="113.59044290107374" width="412.9407514313135" x="2645.792860876568" y="785.8285568699114"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="82.40625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="366.6953125" x="23.1227194656567" xml:space="preserve" y="15.592096450536928">为什么要这么搞呢？
因为不同的电池配置模式不一样，
支持5节的芯片，只接3节电池时，
有2个引脚是空的，这样用00就能标明出哪节空了。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n277">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="267.51990012597344" x="-156.79310403688385" y="3908.5841008027037"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="208.2890625" x="29.615418812986718" xml:space="preserve" y="1.524354738013244">*256就是左右8位，&lt;&lt;8, 2^8=256，高8位+低8位拼成16位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n278">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="267.51990012597344" x="-135.53599215200916" y="4044.432638053325"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="208.2890625" x="29.615418812986718" xml:space="preserve" y="1.524354738013244">*256就是左右8位，&lt;&lt;8, 2^8=256，高8位+低8位拼成16位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n279">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="294.6041338053436" x="-135.53599215200916" y="4080.4038859087386"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="217.390625" x="38.60675440267181" xml:space="preserve" y="1.524354738013244">电池包总电压=(高8位+低8位)*LSB, 手册里写LSB为1.532mV<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n280">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.70209216675562" width="262.80381660602546" x="152.5899171453344" y="4037.5800366125954"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="15" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="22.37646484375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="237.45947265625" x="12.672171974887732" xml:space="preserve" y="0.662813661502696">#define BATVOLTLSB            1532<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n281">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="442.66461125256694" x="-135.53599215200916" y="4116.375133764152"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="387.23046875" x="27.71707125128347" xml:space="preserve" y="1.524354738013244">16bits温度值，*256就是左移8位，将高8位与低8位拼成16 bits,一个LSB是382uV,除以1000是将uV转换为mV.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n282">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.116068515587926" width="167.3071081249989" x="-272.5319977002903" y="4152.346381619566"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="81.65355406249944" y="6.558034257794134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n283">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="928.4031298628665" width="534.3281249999997" x="-1220.06218994334" y="4135.684328882779"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="871.369140625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="421.697265625" x="56.31542968749977" xml:space="preserve" y="28.516994618933495">signed int TemChange(unsigned int uiADCV)
{	
	unsigned char ucA=32,TemNK=0;
	signed int uiD=0;
	TemNK=TemNA;
	if(uiADCV&lt;TemD[TemNK])			//
	{	while(--ucA)
		{	if(TemNK&lt;30)
			{	TemNK++;
				if(uiADCV&gt;=TemD[TemNK])
				{	uiD=-200+TemNK*(int)40;
					uiD=uiD-((int)40)*(uiADCV-TemD[TemNK])/(TemD[TemNK-1]-TemD[TemNK]);
					break;
				}
			}
			else 
			{	uiD=1000;		//100?
				break;
			}
		}
	}
	else if(uiADCV&gt;=TemD[TemNK-1])			
	{	while(--ucA)
		{	if(TemNK&gt;1)
			{	TemNK--;
				if(uiADCV&lt;TemD[TemNK-1])
				{	uiD=-200+TemNK*(int)40;
					uiD=uiD-((int)40)*(uiADCV-TemD[TemNK])/(TemD[TemNK-1]-TemD[TemNK]);
					break;
				}
			}
			else 
			{	uiD=-200;		//-30?
				break;
			}
		}
	}
	else
	{	uiD=-200+TemNK*(int)40;
		uiD=uiD-((int)40)*(uiADCV-TemD[TemNK])/(TemD[TemNK-1]-TemD[TemNK]);
	}
	TemNA=TemNK;
	
	if(uiD&amp;0x8000) 
	{   
		 uiD&amp;=~0x8000;
		 uiD=0x8000-uiD;
		 uiD=uiD*90/100;
		 uiD&amp;=0x7fff;
		 //uiD=0x8000-uiD;
		 uiD|=0x8000;
	}
	else 
	{
		uiD=uiD*90/100;
	}

	return uiD;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n284">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="221.79950689925454" x="-907.5335718425948" y="4135.684328882779"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="213.78125" x="4.009128449627269" xml:space="preserve" y="4.998920610175446">ADC电压值转换为实际温度值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n285">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="14.769421579450977" width="282.7789780890513" x="-448.31497024106045" y="4091.3572488414566"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="269.85546875" x="6.4617546695256465" xml:space="preserve" y="0.4843201647254318">#define  SYS_TEMPEXT_MAX     3 //TS1,TS2,TS3最多支持3个温度传感器<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n286">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="111.29244412475146" x="-100.51383776007788" y="4152.479670514347"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="108.890625" x="1.2009095623757275" xml:space="preserve" y="1.524354738013244">ADC电压值转换为实际温度值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n287">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.20525756278596" width="114.18142905055089" x="-60.96193016266952" y="4203.201846817867"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.796875" x="2.1922770252754447" xml:space="preserve" y="4.702238156392923">电流值，高8位低8位拼成16位<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n288">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.378725544875238" width="128.10036664889282" x="-338.775686890114" y="4234.685652993722"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="112.44921875" x="7.82557394944638" xml:space="preserve" y="1.788972147437562">最高位是符号号，为1表示负值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n289">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="15.436548205571057" width="128.10036664889282" x="-300.6035248515378" y="4266.84523045179"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="109.61328125" x="9.24354269944638" xml:space="preserve" y="0.8178834777854718">0x10000=65536，转换为正值<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n290">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.20525756278596" width="284.38494942097344" x="-94.75928009117477" y="4260.371305987444"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="260.984375" x="11.70028721048672" xml:space="preserve" y="4.702238156392923">#define CRUUVOLTLSB           844 //数据手册上说，1个LSB就是8.44uV<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n291">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.378725544875238" width="253.02687779680195" x="-94.75928009117477" y="4299.904321740643"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="213.19921875" x="19.913829523400977" xml:space="preserve" y="1.788972147437562">gBMSConfig.Type.ShuntSpec=5000;    //分流器规格，5mR<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n292">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="26.28037168334879" width="324.24004690459793" x="-165.97244919897076" y="4361.9531260895"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="315.12109375" x="4.559476577298966" xml:space="preserve" y="6.239795216674793">I=U/R，电流=电压除以电阻，电压单位是mV，所以电阻单位是mR，得到电流单位是A。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n293">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="390.5110569400008" width="333.6293383772625" x="-519.8061651620997" y="4588.212346675727"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="327.42578125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="265.099609375" x="34.26486450113123" xml:space="preserve" y="31.542637845000172">static void pack_temp_max_min(void)
{
		 u8 ia;
	   u16 temp_max;
		 u16 temp_min;
			
		 temp_max = gBMSData.BattPar.TempCell[0];
		 temp_min = gBMSData.BattPar.TempCell[0];
		 for(ia=1;ia&lt;gBMSConfig.Type.TempNum;ia++)
		 {
					if(temp_min &lt; gBMSData.BattPar.TempCell[0])
					{
							temp_min = gBMSData.BattPar.TempCell[0];
					}
					if(temp_min &gt; gBMSData.BattPar.TempCell[0])
					{
							temp_min = gBMSData.BattPar.TempCell[0];
					}
		 }
		 gBMSData.BattPar.TempPackMax = temp_max;
		 gBMSData.BattPar.TempPackMin = temp_min;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n294">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.852650009220383" width="333.6293383772625" x="-519.8061651620997" y="4588.212346675727"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="156.0" x="88.81466918863123" xml:space="preserve" y="5.0259343796105895">循环遍历，找出最大温度值和最小温度值。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n295">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.390788074837587" width="153.2658028006084" x="-471.97215665429167" y="4785.663685318704"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="138.23828125" x="7.513760775304206" xml:space="preserve" y="-0.20499658758126316">这里写错了吧？！ 应该是temp_max!!!<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n296">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.390788074837587" width="185.95912134555113" x="-410.1543787094832" y="4882.6518190423785"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="172.0" x="6.979560672775563" xml:space="preserve" y="-0.20499658758126316">将最大温度值和最小温度值保存在全局变量中！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n297">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="390.5110569400008" width="333.6293383772625" x="-156.17682678483715" y="4588.212346675727"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="342.126953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="284.125" x="24.752169188631257" xml:space="preserve" y="24.192051907500172">static void pack_cell_max_min(void)
{
		 u8 ia;
		 u16 volt_max;
		 u16 volt_min;
	
		 volt_max = gBMSData.BattPar.VoltCell[0];
		 volt_min = gBMSData.BattPar.VoltCell[0];
	
		 for(ia = 1;ia &lt; gBMSConfig.Type.CellNum_Ser;ia++)
		 {
				if(volt_max&lt;gBMSData.BattPar.VoltCell[ia])
				{
						volt_max=gBMSData.BattPar.VoltCell[ia];
				}
				if(volt_min &gt; gBMSData.BattPar.VoltCell[ia])
				{
						volt_min = gBMSData.BattPar.VoltCell[ia];
				}
		 }
		 gBMSData.BattPar.VoltCellMax = volt_max;
		 gBMSData.BattPar.VoltCellMin = volt_min;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n298">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="23.852650009220383" width="333.6293383772625" x="-156.17682678483715" y="4588.212346675727"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="156.0" x="88.81466918863126" xml:space="preserve" y="5.0259343796105895">循环遍历，找出最大电压值和最小电压值。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n299">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.116068515587926" width="163.42275344639185" x="-468.5449364270352" y="4399.4449818877065"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="79.71137672319594" y="6.558034257794134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n300">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.116068515587926" width="163.42275344639185" x="-468.5449364270352" y="4416.561050403295"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#000000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" hasText="false" height="4.0" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="4.0" x="79.71137672319594" y="6.558034257794134">
            <y:LabelModel>
              <y:SmartNodeLabelModel distance="4.0"/>
            </y:LabelModel>
            <y:ModelParameter>
              <y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/>
            </y:ModelParameter>
          </y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n301">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="13.390788074837587" width="185.95912134555113" x="-82.34171826898145" y="4894.286941965045"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="172.0" x="6.979560672775563" xml:space="preserve" y="-0.20499658758126316">将最大电压值和最小电压值保存在全局变量中！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n302">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="27.56206080000004" width="305.95417529266217" x="427.8210821976982" y="1021.3252095178577"/>
          <y:Fill color="#CCFFCC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="10" fontStyle="bold" hasBackgroundColor="false" hasLineColor="false" height="28.501953125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="287.6865234375" x="9.133825927581086" xml:space="preserve" y="-0.46994616250003673">I2C读寄存器，计算单节电池电压，总电压，电流值，温度值，
根据差值开启均衡。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n303">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="207.97730074211222" x="-1001.294058182178" y="3922.5525884241924"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="189.41015625" x="9.28357224605611" xml:space="preserve" y="1.524354738013244">Temporary Buffer to store read-back register values.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n304">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="16.849490726026602" width="197.29086368157073" x="-990.6076211216365" y="3943.9618651912037"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="123.1640625" x="37.06340059078536" xml:space="preserve" y="1.524354738013244">Read back registers every 500ms<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n305">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="33.59940372035112" width="272.3770417769506" x="-958.1111067202909" y="3842.5123413827782"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="262.8203125" x="4.778364638475296" xml:space="preserve" y="4.998920610175446">#define SYS_STAT_RegAddr   0x00<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n306">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.90724421379639" width="277.2033687883304" x="-994.1480485630751" y="3985.842922471282"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="212.29296875" x="32.455200019165204" xml:space="preserve" y="4.053231481898365">Read 12 registers from SYS_STAT(0x00)~CC_CFG(0x0B)<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n307">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.548826724990363" width="272.7525457190932" x="-1063.9382155798735" y="4032.7817332391296"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="216.96875" x="27.89189785954659" xml:space="preserve" y="0.9736321124951246">use memcpy() to fill specific data structure, easy to analysis.
Or we can use &amp; | to check each bits. <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n308">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="242.42729546032024" width="264.6471284841597" x="-1220.06218994334" y="3600.085045922458"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="224.517578125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="201.40234375" x="31.622392367079783" xml:space="preserve" y="8.954858667660119">    union
    {
            struct
            {
                    u8 OCD		:1;
                    u8 SCD		:1;
                    u8 OV		:1;
                    u8 UV		:1;
                    u8 OVRD_ALERT	:1;
                    u8 DEVICE_XREADY	:1;
                    u8 WAKE		:1;
                    u8 CC_READY	:1;
            }StatusBit;
            u8 StatusByte;  
    }SysStatus;  <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n309">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="272.3770417769506" x="-2275.7624487797575" y="3196.442297316205"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="250.359375" x="11.008833388475068" xml:space="preserve" y="0.6998301455714682">#define  PACK_CELL_MAX       15<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n310">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="422.83621320800046" width="472.2864408239998" x="-2098.1612867423" y="1688.8282683959994"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#0000FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="371.529296875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="400.1875" x="36.04947041199989" xml:space="preserve" y="25.653458166500513">typedef struct {		
        uint8_t   Tim10ms_count; // 10ms计数器
        uint8_t   Tim10ms_flag;   // 10ms标志位

        uint8_t   Tim100ms_count; //100ms计数器
        uint8_t   Tim100ms_flag;  //100ms标志位

        uint8_t   Tim200ms_flag;  //200ms标志位
        uint8_t   Tim200ms_count; //200ms计数器

        uint8_t   Tim500ms_count; //500ms计数器
        uint8_t   Tim500ms_flag; //500ms标志位

        uint8_t   Tim1s_count;  //1s计数器
        uint8_t   Tim1s_flag ;  //1s标志位

        uint8_t   Tim10s_count; //10s计数器
        uint8_t   Tim10s_flag ; //10s标志位

        uint8_t   Tim1min_count; //1分钟计数器
        uint8_t   Tim1min_flag ; //1分钟标志位
}TaskTime;

#define  TaskTime_DEFAULTS  {0,0,0,0,0,0,0,0,0,0,0,0,0,0}  // 初始化参数
extern  TaskTime       TaskTimePare;  //声明全局变量<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n311">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="63.0503421654721" width="173.98683490684164" x="-2476.5265480579137" y="2992.9932492173066"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="48.103515625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="132.0625" x="20.96216745342099" xml:space="preserve" y="7.473413270236051">#define   gRET_OK     0
#define   gRET_NG     1
#define gRET_TM     1	<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n312">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="235.64617993560978" width="242.89872617770163" x="-2719.4252742356152" y="3056.0435913827787"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="165.712890625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="164.0546875" x="39.42201933885099" xml:space="preserve" y="34.96664465530466">typedef enum _ePCB_SEQ
{
	PCB_SEQ_INIT = 0,	
	PCB_SEQ_WAIT,	
	PCB_SEQ_CHK,					
	PCB_SEQ_SELECT,		
	PCB_SEQ_MAP,
	PCB_SEQ_SET,		
	PCB_SEQ_BALA_TIM,			
	PCB_SEQ_MAX				/*MAX SEQ*/
}	ePCB_SEQ;
<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n313">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="581.3910472636094" width="508.3813921617017" x="-2984.328712099191" y="3291.8033327772623"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#FF00FF" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="533.2421875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="422.951171875" x="42.71511014335101" xml:space="preserve" y="24.074429881804917">u8 balance_write_regs(u8 cellbalanbyte1,u8 cellbalanbyte2,u8 cellbalanbyte3 )
{
    u8 ret=gRET_OK; 
    u8 rcd=0; 
    u8 write_regs[3]={0};
    u8 read_regs[3]={0};
    u8 ia=0;  
    u16 cells_map=gBMSData.BattPar.Cells_Map;

    write_regs[0]=cellbalanbyte1;
    write_regs[1]=cellbalanbyte2;
    write_regs[2]=cellbalanbyte3;
    
    rcd=IIC_WritByteMore(BQ769xxAddr, CELLBAL1_RegAddr, write_regs,3);
    
    if( rcd!=gRET_OK )
    {
          return  gRET_NG;
    }
    
    rcd=IIC_ReadByteMore(BQ769xxAddr, CELLBAL1_RegAddr, read_regs,3);
    if( rcd!=gRET_OK )
    {
          return  gRET_NG;
    }
    
    for(ia=0; ia&lt;3; ia++ )
    {
        if(read_regs[ia]!=write_regs[ia])
        {
            ret=gRET_NG;
        }
    }
		(void) cells_map;
    return ret;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n314">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="130.75994411940155" x="-2666.705556786441" y="3415.954414622181"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="96.46875" x="17.145597059700776" xml:space="preserve" y="0.6998301455714682">Mask of cells<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n315">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="280.4441585899426" x="-2756.970706647857" y="3524.350211095006"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="251.2109375" x="14.616610544971081" xml:space="preserve" y="0.6998301455714682">I2C Write 3 cell balancing registers<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n316">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="43.71491069589024" width="144.21356839686905" x="-2763.8087479769056" y="3451.518560871124"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="130.2890625" x="6.962252948434525" xml:space="preserve" y="10.056674097945233">3 Register Values<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n317">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="280.4441585899426" x="-2802.171808181639" y="3335.6960060012007"/>
          <y:Fill color="#FF9900" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="2.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="260.798828125" x="9.822665232471081" xml:space="preserve" y="3.150025458071468">The key point is how to set the 3 register values.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n318">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="278.9857128866147" x="-2756.9707066478577" y="3632.7460075678314"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="252.1328125" x="13.426450193307119" xml:space="preserve" y="0.6998301455714682">I2C Read 3 cell balancing registers<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n319">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="295.4445705628277" x="-2805.415398212543" y="3747.8119417296743"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="278.8046875" x="8.31994153141386" xml:space="preserve" y="3.150025458071468">Check if read-back values are equal to write values.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n320">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="52.57333354529419" x="-2475.9473199374893" y="3490.8804229922634"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="3.274948022647095" xml:space="preserve" y="0.429197866242248">StateMachine-1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n321">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="50.664095533665204" x="-2474.6173100462856" y="3652.713259735774"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="2.320329016832602" xml:space="preserve" y="0.429197866242248">StateMachine-2<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n322">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="51.114887841966265" x="-2474.4888742341614" y="3756.495135358714"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="2.5457251709831326" xml:space="preserve" y="0.429197866242248">StateMachine-3<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n323">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="52.57333354529419" x="-2475.9473199374893" y="3948.2212975636726"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="3.274948022647095" xml:space="preserve" y="0.429197866242248">StateMachine-4<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n324">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="52.57333354529419" x="-2476.5265480579137" y="4370.695729483823"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="3.274948022647095" xml:space="preserve" y="0.429197866242248">StateMachine-5<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n325">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="52.57333354529419" x="-2476.5265480579137" y="4429.599152099785"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="3.274948022647095" xml:space="preserve" y="0.429197866242248">StateMachine-6<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n326">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="12.208981669984155" width="52.57333354529419" x="-2476.5265480579137" y="4562.633436309201"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="6" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="11.3505859375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="46.0234375" x="3.274948022647095" xml:space="preserve" y="0.429197866242248">StateMachine-7<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n327">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.38442950562387" width="304.29772463158724" x="-2083.4071812070406" y="3577.1818683320053"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="256.779296875" x="23.75921387829385" xml:space="preserve" y="3.341628815312106">Write 0 to 3 Cell Balancing Registers to turn off.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n328">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.38442950562387" width="320.9061864920993" x="-2201.6823282123923" y="3813.1886526795734"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="304.0" x="8.453093246049775" xml:space="preserve" y="3.341628815312106">单节电压最大值最小值之差，不超过预定的值，不均衡！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n329">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="320.9061864920993" x="-2201.6823282123923" y="3788.1874298884304"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="313.09375" x="3.906218246049775" xml:space="preserve" y="0.6998301455714682">gBMSConfig.Balan.balanc_diffe_volt = 100;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n330">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="320.9061864920993" x="-1819.7535218379048" y="3788.187429888431"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="322.8671875" x="-0.9805005039502248" xml:space="preserve" y="0.6998301455714682">gBMSConfig.Balan.balanc_start_volt = 3000;<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n331">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.38442950562387" width="320.9061864920993" x="-1819.7535218379046" y="3813.188652679574"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="258.677734375" x="31.114226058549548" xml:space="preserve" y="3.341628815312106">单节电压最小值小于3V说明电池坏了，不均衡！<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n332">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="150.470009461239" x="-2031.246151181532" y="3763.1862070972875"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="132.9921875" x="8.738910980619494" xml:space="preserve" y="0.6998301455714682">100=0.1V=100mV<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n333">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="25.00122279114271" width="85.08337237135356" x="-1583.9307077171588" y="3763.186207097288"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="77.3984375" x="3.842467435676781" xml:space="preserve" y="0.6998301455714682">3000=3V  <y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n334">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="179.89492335408772" width="580.4716760324002" x="-2069.0849633052967" y="4049.0740750467485"/>
          <y:Fill color="#FFCC99" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="5.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="16" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="141.2109375" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="548.1171875" x="16.177244266199978" xml:space="preserve" y="19.341992927043975">CellNum_Ser串联的电池有几节Serial
这应该是对所有单节电池电压进行排序的一个算法。
然后设置那3个Cell Balancing Register输出0或1控制PMOS来通过电阻放电，
实现被动均衡。

只有电池的最大值与最小值差在100mV之上，才开始均衡。
当电池电压低于3V时，发生电池已经损坏了，没必要均衡了。<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n335">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="29.335799417943804" width="408.6265985456032" x="-2123.959345765932" y="4525.347001797902"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="18.701171875" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="378.736328125" x="14.945135210301487" xml:space="preserve" y="5.317313771472072">根据电压值判断哪个均衡需要打开，然后写3个Cell Balancing Register.<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n336">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="145.4250354729985" x="2737.481211118824" y="3509.166449922435"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="121.34765625" x="12.038689611499194" xml:space="preserve" y="1.862669874513358">电池温度超过25度，比例系数为1<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n337">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="164.19941641959952" x="2752.8469152621087" y="3560.576925600068"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="150.91796875" x="6.640723834799701" xml:space="preserve" y="1.862669874513358">电池温度在10度~25度之间，比例系数为2<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n338">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="164.19941641959952" x="2752.8469152621087" y="3604.9282321467367"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="146.46875" x="8.8653332097997" xml:space="preserve" y="1.862669874513358">电池温度在0度~10度之间，比例系数为3<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n339">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="183.924655021901" x="2752.8469152621087" y="3649.2795386934054"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="156.2421875" x="13.841233760950672" xml:space="preserve" y="1.862669874513358">电池温度在-1度 ~ -20度之间，比例系数为4<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n340">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="183.924655021901" x="2752.846915262109" y="3693.630845240074"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="160.69140625" x="11.616624385950672" xml:space="preserve" y="1.862669874513358">电池温度在-20度 ~ -30度之间，比例系数为5<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n341">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="17.526120999026375" width="139.8210446085501" x="2736.2087012269535" y="3748.539274436572"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle hasColor="false" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="88.44921875" x="25.68591292927522" xml:space="preserve" y="1.862669874513358">其他情况，比例系数为6<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n342">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="21.41047567763337" width="195.9216462948899" x="2821.841967735201" y="4059.3358339136607"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="13.80078125" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="148.0" x="23.9608231474449" xml:space="preserve" y="3.804847213816629">这个温度比例系数为什么要这样计算呢？<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n343">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="407.62699438097025" width="390.48925598751964" x="2566.9063102939745" y="4227.677430852265"/>
          <y:Fill hasColor="false" transparent="false"/>
          <y:BorderStyle color="#00FF00" raised="false" type="line" width="3.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="12" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="283.322265625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="287.76953125" x="51.35986236875988" xml:space="preserve" y="62.15236437798558">static u16 rate_limit_max_min(u16 rate_value)
{
		u16 ret_value=0;
	
		if(rate_value&gt; TEMP_CAP_RATE_LIMITH_HIGH )
		{
				ret_value=TEMP_CAP_RATE_LIMITH_HIGH;
		}
		else if(rate_value&lt;TEMP_CAP_RATE_LIMITL_LOW)
		{
				ret_value=TEMP_CAP_RATE_LIMITL_LOW;
		}
		else
		{
				ret_value=rate_value;
		}
		
		return ret_value;
}<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <node id="n344">
      <data key="d6">
        <y:ShapeNode>
          <y:Geometry height="40.0230085126251" width="211.70183717673137" x="2638.7570965520094" y="4243.862242013128"/>
          <y:Fill color="#FF99CC" transparent="false"/>
          <y:BorderStyle color="#FF0000" raised="false" type="line" width="1.0"/>
          <y:NodeLabel alignment="left" autoSizePolicy="content" fontFamily="Dialog" fontSize="8" fontStyle="plain" hasBackgroundColor="false" hasLineColor="false" height="23.6015625" horizontalTextPosition="center" iconTextGap="4" modelName="custom" textColor="#000000" verticalTextPosition="bottom" visible="true" width="180.9609375" x="15.370449838365857" xml:space="preserve" y="8.210723006312946">#define TEMP_CAP_RATE_LIMITH_HIGH   1050
#define TEMP_CAP_RATE_LIMITL_LOW    750<y:LabelModel><y:SmartNodeLabelModel distance="4.0"/></y:LabelModel><y:ModelParameter><y:SmartNodeLabelModelParameter labelRatioX="0.0" labelRatioY="0.0" nodeRatioX="0.0" nodeRatioY="0.0" offsetX="0.0" offsetY="0.0" upX="0.0" upY="-1.0"/></y:ModelParameter></y:NodeLabel>
          <y:Shape type="rectangle"/>
        </y:ShapeNode>
      </data>
    </node>
    <edge id="e0" source="n1" target="n2">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e1" source="n4" target="n3">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="25.58581040942454" y="613.4356514116218"/>
            <y:Point x="25.58581040942454" y="506.34618282324357"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e2" source="n5" target="n6">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="25.58581040942454" y="645.6024490632437"/>
            <y:Point x="25.58581040942454" y="797.9999999999998"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e3" source="n9" target="n8">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="46.50485967442603" y="659.9524522632438"/>
            <y:Point x="46.50485967442603" y="833.6552981691162"/>
            <y:Point x="-249.9035719661989" y="833.6552981691162"/>
            <y:Point x="-249.9035719661989" y="932.7656249999997"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e4" source="n11" target="n10">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-1346.8091031394829" y="766.8947037917351"/>
            <y:Point x="-1346.8091031394829" y="729.9999999999998"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e5" source="n10" target="n12">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-1620.9754125217244" y="729.9999999999998"/>
            <y:Point x="-1620.9754125217244" y="795.9999999999998"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e6" source="n17" target="n16">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="68.97201457971235" y="704.3810986632438"/>
            <y:Point x="68.97201457971235" y="853.6552981691162"/>
            <y:Point x="-229.90357196619888" y="853.6552981691162"/>
            <y:Point x="-229.90357196619888" y="952.7656249999997"/>
            <y:Point x="-563.3738354102061" y="952.7656249999997"/>
            <y:Point x="-563.3738354102061" y="1324.0977124999997"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e7" source="n19" target="n18">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="93.56586112913692" y="718.8097450632439"/>
            <y:Point x="93.56586112913692" y="873.6552981691162"/>
            <y:Point x="-209.9035719661989" y="873.6552981691162"/>
            <y:Point x="-209.9035719661989" y="972.7656249999997"/>
            <y:Point x="-540.9791409375496" y="972.7656249999997"/>
            <y:Point x="-540.9791409375496" y="1562.3868875"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e8" source="n20" target="n21">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="790.6577460680649" y="733.159748263244"/>
            <y:Point x="790.6577460680649" y="79.43755625000023"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e9" source="n22" target="n23">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="810.6577460680649" y="747.509751463244"/>
            <y:Point x="810.6577460680649" y="296.0988523988499"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e10" source="n24" target="n25">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="827.1616163805649" y="761.9383978632441"/>
            <y:Point x="827.1616163805649" y="561.9788985476996"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e11" source="n26" target="n27">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="1491.9739209411132" y="791.9383978632441"/>
            <y:Point x="1491.9739209411132" y="296.0988523988499"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e12" source="n29" target="n28">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="2285.209281097362" y="808.2544810632442"/>
            <y:Point x="2285.209281097362" y="208.59885239884994"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e13" source="n30" target="n31">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="1015.4574332738757" y="835.4589525264881"/>
            <y:Point x="1015.4574332738757" y="895.9263560632442"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e14" source="n31" target="n32">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e15" source="n34" target="n33">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="989.8507577965827" y="851.0148181264882"/>
            <y:Point x="989.8507577965827" y="990.9187106861976"/>
            <y:Point x="1722.760914046583" y="990.9187106861976"/>
            <y:Point x="1722.760914046583" y="1036.941981063244"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e16" source="n35" target="n39">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e17" source="n36" target="n40">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="2325.5983595885746" y="976.7803505398227"/>
            <y:Point x="2325.5983595885746" y="1296.9110568699116"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e18" source="n37" target="n41">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="2283.0308814635737" y="1007.1062178632438"/>
            <y:Point x="2283.0308814635737" y="1650.9660568699114"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e19" source="n38" target="n42">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="2250.5476681057603" y="1040.9169378796455"/>
            <y:Point x="2250.5476681057603" y="2180.0503537449117"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e20" source="n43" target="n44">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="952.9321908670859" y="865.7318229264883"/>
            <y:Point x="952.9321908670859" y="1230.6578973210162"/>
            <y:Point x="1567.0948679382848" y="1230.6578973210162"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e21" source="n45" target="n46">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="901.0797868924695" y="881.0148181264883"/>
            <y:Point x="901.0797868924695" y="1709.4618960943328"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e22" source="n46" target="n47">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e23" source="n57" target="n58">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-120.22231314803503" y="944.9984767845983"/>
            <y:Point x="-120.22231314803503" y="1055.2457996760716"/>
            <y:Point x="-435.1637193980348" y="1055.2457996760716"/>
            <y:Point x="-435.1637193980348" y="1707.1012684260713"/>
            <y:Point x="-712.276673965575" y="1707.1012684260713"/>
          </y:Path>
          <y:LineStyle color="#0000FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e24" source="n58" target="n59">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-1264.6457583622996" y="2221.5744999999997"/>
          </y:Path>
          <y:LineStyle color="#0000FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e25" source="n60" target="n61">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-53.684235420287564" y="975.8162687794645"/>
            <y:Point x="-53.684235420287564" y="1099.8678291218698"/>
            <y:Point x="-372.7660416477902" y="1099.8678291218698"/>
            <y:Point x="-372.7660416477902" y="1707.1012684260713"/>
            <y:Point x="-326.5061651620997" y="1707.1012684260713"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e26" source="n61" target="n62">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-39.204602662099944" y="1837.8463749999996"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e27" source="n64" target="n63">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="6.138168664709951" y="1006.4668863691967"/>
            <y:Point x="6.138168664709951" y="1696.9258693757806"/>
            <y:Point x="530.9648571758005" y="1696.9258693757806"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e28" source="n66" target="n65">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="708.3586337164677" y="2110.3320853718697"/>
            <y:Point x="708.3586337164677" y="1642.6375669470694"/>
            <y:Point x="49.92113371646815" y="1642.6375669470694"/>
            <y:Point x="49.92113371646815" y="1035.1062399178577"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="3.0"/>
          <y:Arrows source="standard" target="none"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e29" source="n67" target="n68">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="597.9394547565073" y="1063.7041286321528"/>
            <y:Point x="597.9394547565073" y="1264.8563995544919"/>
            <y:Point x="811.4868180377575" y="1264.8563995544919"/>
            <y:Point x="811.4868180377575" y="1882.4496612732423"/>
            <y:Point x="916.5750268516007" y="1882.4496612732423"/>
          </y:Path>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e30" source="n70" target="n69">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="516.8252523346323" y="1095.2595070357154"/>
            <y:Point x="516.8252523346323" y="1312.9851157857372"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e31" source="n66" target="n71">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="530.9648571758005" y="3301.7436133773244"/>
            <y:Point x="-39.2046026621" y="3301.7436133773244"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e32" source="n71" target="n72">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e33" source="n72" target="n73">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#FF00FF" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e34" source="n73" target="n74">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="-482.6464230374836" sy="61.740154879999864" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#FF00FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e35" source="n74" target="n75">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-3097.5962786993214" y="4035.8384900127785"/>
            <y:Point x="-3097.5962786993214" y="4035.8384900127785"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e36" source="n68" target="n76">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="74.00316656738266" ty="0.0"/>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e37" source="n76" target="n77">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e38" source="n77" target="n78">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e39" source="n78" target="n79">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#00FF00" type="line" width="4.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e40" source="n81" target="n80">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e41" source="n80" target="n82">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="3535.6755797603746" y="3786.0653954355985"/>
            <y:Point x="3535.6755797603746" y="3786.0653954355985"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e42" source="n82" target="n83">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e43" source="n93" target="n92">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-504.6468883138374" y="2033.5516931451973"/>
            <y:Point x="-504.6468883138374" y="2731.8988283395547"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e44" source="n92" target="n95">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-922.6615042256536" y="2731.8988283395547"/>
            <y:Point x="-922.6615042256536" y="2670.4288621483565"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e45" source="n97" target="n98">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-1979.133978598069" y="2873.0867842475614"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e46" source="n100" target="n99">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="80.63901382264885"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e47" source="n107" target="n106">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-2747.3298991159045" y="2703.341516435988"/>
            <y:Point x="-2747.3298991159045" y="2991.46752180258"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e48" source="n108" target="n105">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-2747.3298991159045" y="2658.972803459372"/>
            <y:Point x="-2747.3298991159045" y="2559.385196794392"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e49" source="n109" target="n104">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-2698.499877740908" y="2614.6040904827555"/>
            <y:Point x="-2698.499877740908" y="2173.0733303282905"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e50" source="n110" target="n103">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-2653.176566728466" y="2570.2353775061392"/>
            <y:Point x="-2653.176566728466" y="1880.8076212729816"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e51" source="n103" target="n111">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-3862.4639454899393" y="1880.8076212729816"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e52" source="n104" target="n111">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="141.08915960334434" ty="-135.41427523090806">
            <y:Point x="-3721.374785886595" y="2173.0733303282905"/>
          </y:Path>
          <y:LineStyle color="#993366" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e53" source="n105" target="n111">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="81.70051865098048"/>
          <y:LineStyle color="#993366" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e54" source="n76" target="n121">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="-63.343756549019645" ty="0.0"/>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e55" source="n76" target="n122">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="98.40164144523828" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="940.9735017294563" y="4017.487574944638"/>
            <y:Point x="1566.5361585359826" y="4017.487574944638"/>
          </y:Path>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e56" source="n106" target="n76">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="-72.69349136142102" ty="-186.61073339365203">
            <y:Point x="-3087.998407732996" y="3293.475768791685"/>
            <y:Point x="-3570.787912943687" y="3293.475768791685"/>
            <y:Point x="-3570.787912943687" y="5203.363363384988"/>
            <y:Point x="514.1803417275951" y="5203.363363384988"/>
            <y:Point x="514.1803417275951" y="3366.0127069243626"/>
            <y:Point x="769.878368922797" y="3366.0127069243626"/>
          </y:Path>
          <y:LineStyle color="#00FF00" type="line" width="4.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e57" source="n160" target="n159">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="1530.0542424636424" y="3668.8992754594387"/>
            <y:Point x="1530.0542424636424" y="3827.6833649768196"/>
            <y:Point x="2047.6857320462955" y="3827.6833649768196"/>
            <y:Point x="2047.6857320462955" y="4195.963502877399"/>
          </y:Path>
          <y:LineStyle color="#00FF00" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e58" source="n179" target="n175">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="3462.6247624092093" y="1683.0646503636865"/>
            <y:Point x="3462.6247624092093" y="1610.672931869911"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e59" source="n44" target="n183">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="392.6150963483408" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e60" source="n271" target="n272">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#FF0000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e61" source="n267" target="n276">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="557.8445468548517" y="3804.00829431926"/>
            <y:Point x="557.8445468548517" y="4906.162232435356"/>
            <y:Point x="5452.150251881219" y="4906.162232435356"/>
            <y:Point x="5452.150251881219" y="842.6237783204483"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e62" source="n275" target="n71">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="38.90146269042407"/>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e63" source="n275" target="n276">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="197.83230293788029" ty="-0.03525393058521331">
            <y:Point x="557.8445468548517" y="4012.9997978232027"/>
            <y:Point x="557.8445468548517" y="4906.598158705371"/>
            <y:Point x="5452.257696957087" y="4906.598158705371"/>
            <y:Point x="5452.257696957087" y="842.5885243898631"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e64" source="n282" target="n283">
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="-410.4234436790575">
            <y:Point x="-188.87844363779084" y="4189.4624501351545"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e65" source="n299" target="n293">
      <data key="d9"/>
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-598.066576720674" y="4408.003016145501"/>
            <y:Point x="-598.066576720674" y="4566.088962779253"/>
            <y:Point x="-352.99149597346843" y="4566.088962779253"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e66" source="n300" target="n298">
      <data key="d9"/>
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="10.63784240379411" y="4425.119084661089"/>
          </y:Path>
          <y:LineStyle color="#000000" type="line" width="1.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e67" source="n307" target="n308">
      <data key="d9"/>
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0">
            <y:Point x="-1286.2081128717027" y="4045.5561466016247"/>
            <y:Point x="-1286.2081128717027" y="3721.298693652618"/>
          </y:Path>
          <y:LineStyle color="#FF00FF" type="line" width="2.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
    <edge id="e68" source="n310" target="n59">
      <data key="d9"/>
      <data key="d10">
        <y:PolyLineEdge>
          <y:Path sx="0.0" sy="0.0" tx="0.0" ty="0.0"/>
          <y:LineStyle color="#0000FF" type="line" width="3.0"/>
          <y:Arrows source="none" target="standard"/>
          <y:BendStyle smoothed="false"/>
        </y:PolyLineEdge>
      </data>
    </edge>
  </graph>
  <data key="d7">
    <y:Resources/>
  </data>
</graphml>
